/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/automerge@1.0.1-preview.7/dist/automerge.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Automerge=t():e.Automerge=t()}(this,(function(){return e={"./backend/backend.js":
/*!****************************!*\
  !*** ./backend/backend.js ***!
  \****************************/function(e,t,n){const{encodeChange:s}=n(/*! ./columnar */"./backend/columnar.js"),{BackendDoc:r}=n(/*! ./new */"./backend/new.js"),{backendState:o}=n(/*! ./util */"./backend/util.js");function a(e,t,n){if(e.hashesByActor[t]&&e.hashesByActor[t][n])return e.hashesByActor[t][n];if(!e.haveHashGraph&&(e.computeHashGraph(),e.hashesByActor[t]&&e.hashesByActor[t][n]))return e.hashesByActor[t][n];throw new RangeError(`Unknown change: actorId = ${t}, seq = ${n+1}`)}function i(e,t){if(!Array.isArray(t))throw new TypeError("Pass an array of hashes to Backend.getChanges()");return o(e).getChanges(t)}e.exports={init:function(){return{state:new r,heads:[]}},clone:function(e){return{state:o(e).clone(),heads:e.heads}},free:function(e){e.state=null,e.frozen=!0},applyChanges:function(e,t){const n=o(e),s=n.applyChanges(t);return e.frozen=!0,[{state:n,heads:n.heads},s]},applyLocalChange:function(e,t){const n=o(e);if(t.seq<=n.clock[t.actor])throw new RangeError("Change request has already been applied");if(t.seq>1){const e=a(n,t.actor,t.seq-2);if(!e)throw new RangeError(`Cannot find hash of localChange before seq=${t.seq}`);let s={[e]:!0};for(let e of t.deps)s[e]=!0;t.deps=Object.keys(s).sort()}const r=s(t),i=n.applyChanges([r],!0);e.frozen=!0;const l=a(n,t.actor,t.seq-1);return i.deps=i.deps.filter((e=>e!==l)),[{state:n,heads:n.heads},i,r]},save:function(e){return o(e).save()},load:function(e){const t=new r(e);return{state:t,heads:t.heads}},loadChanges:function(e,t){const n=o(e);return n.applyChanges(t),e.frozen=!0,{state:n,heads:n.heads}},getPatch:function(e){return o(e).getPatch()},getHeads:function(e){return e.heads},getAllChanges:function(e){return i(e,[])},getChanges:i,getChangesAdded:function(e,t){return o(t).getChangesAdded(o(e))},getChangeByHash:function(e,t){return o(e).getChangeByHash(t)},getMissingDeps:function(e,t=[]){return o(e).getMissingDeps(t)}}},"./backend/columnar.js":
/*!*****************************!*\
  !*** ./backend/columnar.js ***!
  \*****************************/function(e,t,n){const s=n(/*! pako */"./node_modules/pako/index.js"),{copyObject:r,parseOpId:o,equalBytes:a}=n(/*! ../src/common */"./src/common.js"),{utf8ToString:i,hexStringToBytes:l,bytesToHexString:c,Encoder:d,Decoder:u,RLEEncoder:h,RLEDecoder:f,DeltaEncoder:p,DeltaDecoder:b,BooleanEncoder:g,BooleanDecoder:m}=n(/*! ./encoding */"./backend/encoding.js"),{Hash:y}=n(/*! fast-sha256 */"./node_modules/fast-sha256/sha256.js"),w=new Uint8Array([133,111,74,131]),_={GROUP_CARD:0,ACTOR_ID:1,INT_RLE:2,INT_DELTA:3,BOOLEAN:4,STRING_RLE:5,VALUE_LEN:6,VALUE_RAW:7},I={NULL:0,FALSE:1,TRUE:2,LEB128_UINT:3,LEB128_INT:4,IEEE754:5,UTF8:6,BYTES:7,COUNTER:8,TIMESTAMP:9,MIN_UNKNOWN:10,MAX_UNKNOWN:15},v=["makeMap","set","makeList","del","makeText","inc","makeTable","link"],k=[{columnName:"objActor",columnId:0|_.ACTOR_ID},{columnName:"objCtr",columnId:0|_.INT_RLE},{columnName:"keyActor",columnId:16|_.ACTOR_ID},{columnName:"keyCtr",columnId:16|_.INT_DELTA},{columnName:"keyStr",columnId:16|_.STRING_RLE},{columnName:"idActor",columnId:32|_.ACTOR_ID},{columnName:"idCtr",columnId:32|_.INT_DELTA},{columnName:"insert",columnId:48|_.BOOLEAN},{columnName:"action",columnId:64|_.INT_RLE},{columnName:"valLen",columnId:80|_.VALUE_LEN},{columnName:"valRaw",columnId:80|_.VALUE_RAW},{columnName:"chldActor",columnId:96|_.ACTOR_ID},{columnName:"chldCtr",columnId:96|_.INT_DELTA}],x=k.concat([{columnName:"predNum",columnId:112|_.GROUP_CARD},{columnName:"predActor",columnId:112|_.ACTOR_ID},{columnName:"predCtr",columnId:112|_.INT_DELTA}]),j=k.concat([{columnName:"succNum",columnId:128|_.GROUP_CARD},{columnName:"succActor",columnId:128|_.ACTOR_ID},{columnName:"succCtr",columnId:128|_.INT_DELTA}]),E=[{columnName:"actor",columnId:0|_.ACTOR_ID},{columnName:"seq",columnId:0|_.INT_DELTA},{columnName:"maxOp",columnId:16|_.INT_DELTA},{columnName:"time",columnId:32|_.INT_DELTA},{columnName:"message",columnId:48|_.STRING_RLE},{columnName:"depsNum",columnId:64|_.GROUP_CARD},{columnName:"depsIndex",columnId:64|_.INT_DELTA},{columnName:"extraLen",columnId:80|_.VALUE_LEN},{columnName:"extraRaw",columnId:80|_.VALUE_RAW}];function O(e,t){if(!e||!e.actorId)return e;const n=e.counter,s=t.indexOf(e.actorId);if(s<0)throw new RangeError("missing actorId");return{counter:n,actorNum:s,actorId:e.actorId}}function A(e,t){return e.counter<t.counter?-1:e.counter>t.counter?1:e.actorId<t.actorId?-1:e.actorId>t.actorId?1:0}function R(e,t){if("_root"===e.obj)t.objActor.appendValue(null),t.objCtr.appendValue(null);else{if(!(e.obj.actorNum>=0&&e.obj.counter>0))throw new RangeError(`Unexpected objectId reference: ${JSON.stringify(e.obj)}`);t.objActor.appendValue(e.obj.actorNum),t.objCtr.appendValue(e.obj.counter)}}function C(e,t){if(e.key)t.keyActor.appendValue(null),t.keyCtr.appendValue(null),t.keyStr.appendValue(e.key);else if("_head"===e.elemId&&e.insert)t.keyActor.appendValue(null),t.keyCtr.appendValue(0),t.keyStr.appendValue(null);else{if(!(e.elemId&&e.elemId.actorNum>=0&&e.elemId.counter>0))throw new RangeError(`Unexpected operation key: ${JSON.stringify(e)}`);t.keyActor.appendValue(e.elemId.actorNum),t.keyCtr.appendValue(e.elemId.counter),t.keyStr.appendValue(null)}}function V(e,t){const n=v.indexOf(e.action);if(n>=0)t.action.appendValue(n);else{if("number"!=typeof e.action)throw new RangeError(`Unexpected operation action: ${e.action}`);t.action.appendValue(e.action)}}function S(e,t){if("set"!==e.action&&"inc"!==e.action||null===e.value)t.valLen.appendValue(I.NULL);else if(!1===e.value)t.valLen.appendValue(I.FALSE);else if(!0===e.value)t.valLen.appendValue(I.TRUE);else if("string"==typeof e.value){const n=t.valRaw.appendRawString(e.value);t.valLen.appendValue(n<<4|I.UTF8)}else if(ArrayBuffer.isView(e.value)){const n=t.valRaw.appendRawBytes(new Uint8Array(e.value.buffer));t.valLen.appendValue(n<<4|I.BYTES)}else if("number"==typeof e.value){let n,[s,r]=function(e){switch(e.datatype){case"counter":return[I.COUNTER,e.value];case"timestamp":return[I.TIMESTAMP,e.value];case"uint":return[I.LEB128_UINT,e.value];case"int":return[I.LEB128_INT,e.value];case"float64":{const t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e.value,!0),[I.IEEE754,new Uint8Array(t)]}default:if(Number.isInteger(e.value)&&e.value<=Number.MAX_SAFE_INTEGER&&e.value>=Number.MIN_SAFE_INTEGER)return[I.LEB128_INT,e.value];{const t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e.value,!0),[I.IEEE754,new Uint8Array(t)]}}}(e);n=s===I.LEB128_UINT?t.valRaw.appendUint53(r):s===I.IEEE754?t.valRaw.appendRawBytes(r):t.valRaw.appendInt53(r),t.valLen.appendValue(n<<4|s)}else{if(!("number"==typeof e.datatype&&e.datatype>=I.MIN_UNKNOWN&&e.datatype<=I.MAX_UNKNOWN&&e.value instanceof Uint8Array))throw e.datatype?new RangeError(`Unknown datatype ${e.datatype} for value ${e.value}`):new RangeError(`Unsupported value in operation: ${e.value}`);{const n=t.valRaw.appendRawBytes(e.value);t.valLen.appendValue(n<<4|e.datatype)}}}function N(e,t){if(e===I.NULL)return{value:null};if(e===I.FALSE)return{value:!1};if(e===I.TRUE)return{value:!0};if(e%16===I.UTF8)return{value:i(t)};if(e%16===I.LEB128_UINT)return{value:new u(t).readUint53(),datatype:"uint"};if(e%16===I.LEB128_INT)return{value:new u(t).readInt53(),datatype:"int"};if(e%16===I.IEEE754){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);if(8===t.byteLength)return{value:e.getFloat64(0,!0),datatype:"float64"};throw new RangeError(`Invalid length for floating point number: ${t.byteLength}`)}return e%16===I.COUNTER?{value:new u(t).readInt53(),datatype:"counter"}:e%16===I.TIMESTAMP?{value:new u(t).readInt53(),datatype:"timestamp"}:{value:t,datatype:e%16}}function T(e,t,n,s){const{columnId:r,columnName:o,decoder:a}=e[t];if(r%8===_.VALUE_LEN&&t+1<e.length&&e[t+1].columnId===r+1){const n=a.readValue(),r=e[t+1].decoder.readRawBytes(n>>4),{value:i,datatype:l}=N(n,r);return s[o]=i,l&&(s[o+"_datatype"]=l),2}if(r%8===_.ACTOR_ID){const e=a.readValue();if(null===e)s[o]=null;else{if(!n[e])throw new RangeError(`No actor index ${e}`);s[o]=n[e]}}else s[o]=a.readValue();return 1}function U(e,t){return void 0===t?"string"==typeof e||"boolean"==typeof e||null===e:"number"==typeof e}function L(e,t,n){let s=t,r=[];for(const t of e)if("set"===t.action&&t.values&&t.insert){if(0!==t.pred.length)throw new RangeError("multi-insert pred must be empty");let e=t.elemId;const o=t.datatype;for(const a of t.values){if(!U(a,o))throw new RangeError(`Decode failed: bad value/datatype association (${a},${o})`);r.push({action:"set",obj:t.obj,elemId:e,datatype:o,value:a,pred:[],insert:!0}),e=`${s}@${n}`,s+=1}}else if("del"===t.action&&t.multiOp>1){if(1!==t.pred.length)throw new RangeError("multiOp deletion must have exactly one pred");const e=o(t.elemId),n=o(t.pred[0]);for(let o=0;o<t.multiOp;o++){const a=`${e.counter+o}@${e.actorId}`,i=[`${n.counter+o}@${n.actorId}`];r.push({action:"del",obj:t.obj,elemId:a,pred:i}),s+=1}}else r.push(t),s+=1;return r}function B(e,t){const n=[];for(let s of e){const e=null===s.objCtr?"_root":`${s.objCtr}@${s.objActor}`,r=s.keyStr?void 0:0===s.keyCtr?"_head":`${s.keyCtr}@${s.keyActor}`,o=v[s.action]||s.action,a=r?{obj:e,elemId:r,action:o}:{obj:e,key:s.keyStr,action:o};if(a.insert=!!s.insert,"set"!==v[s.action]&&"inc"!==v[s.action]||(a.value=s.valLen,s.valLen_datatype&&(a.datatype=s.valLen_datatype)),!!s.chldCtr!=!!s.chldActor)throw new RangeError(`Mismatched child columns: ${s.chldCtr} and ${s.chldActor}`);null!==s.chldCtr&&(a.child=`${s.chldCtr}@${s.chldActor}`),t?(a.id=`${s.idCtr}@${s.idActor}`,a.succ=s.succNum.map((e=>`${e.succCtr}@${e.succActor}`)),z(s.succNum.map((e=>({counter:e.succCtr,actorId:e.succActor}))))):(a.pred=s.predNum.map((e=>`${e.predCtr}@${e.predActor}`)),z(s.predNum.map((e=>({counter:e.predCtr,actorId:e.predActor}))))),n.push(a)}return n}function z(e){let t=null;for(let n of e){if(t&&-1!==A(t,n))throw new RangeError("operation IDs are not in ascending order");t=n}}function D(e,t){return(7&e)===_.INT_DELTA?new b(t):(7&e)===_.BOOLEAN?new m(t):(7&e)===_.STRING_RLE?new f("utf8",t):(7&e)===_.VALUE_RAW?new u(t):new f("uint",t)}function H(e,t){const n=new Uint8Array(0);let s=[],r=0,o=0;for(;r<e.length||o<t.length;)if(r===e.length||o<t.length&&t[o].columnId<e[r].columnId){const{columnId:e,columnName:r}=t[o];s.push({columnId:e,columnName:r,decoder:D(e,n)}),o++}else if(o===t.length||e[r].columnId<t[o].columnId){const{columnId:t,buffer:n}=e[r];s.push({columnId:t,decoder:D(t,n)}),r++}else{const{columnId:n,buffer:a}=e[r],{columnName:i}=t[o];s.push({columnId:n,columnName:i,decoder:D(n,a)}),r++,o++}return s}function $(e,t,n){e=H(e,n);let s=[];for(;e.some((e=>!e.decoder.done));){let n={},r=0;for(;r<e.length;){const s=e[r].columnId;let o=s>>4,a=1;for(;r+a<e.length&&e[r+a].columnId>>4===o;)a++;if(s%8===_.GROUP_CARD){const s=[],o=e[r].decoder.readValue();for(let n=0;n<o;n++){let n={};for(let s=1;s<a;s++)T(e,r+s,t,n);s.push(n)}n[e[r].columnName]=s,r+=a}else r+=T(e,r,t,n)}s.push(n)}return s}function M(e){const t=-9>>>0;let n=-1,s=[],r=e.readUint53();for(let o=0;o<r;o++){const r=e.readUint53(),o=e.readUint53();if((r&t)<=(n&t))throw new RangeError("Columns must be in ascending order");n=r,s.push({columnId:r,bufferLen:o})}return s}function P(e,t){const n=t.filter((e=>e.encoder.buffer.byteLength>0));e.appendUint53(n.length);for(let t of n)e.appendUint53(t.columnId),e.appendUint53(t.encoder.buffer.byteLength)}function F(e){const t=e.readUint53(),n=[];for(let s=0;s<t;s++)n.push(c(e.readRawBytes(32)));let s={actor:e.readHexString(),seq:e.readUint53(),startOp:e.readUint53(),time:e.readInt53(),message:e.readPrefixedString(),deps:n};const r=[s.actor],o=e.readUint53();for(let t=0;t<o;t++)r.push(e.readHexString());return s.actorIds=r,s}function q(e,t){const n=w.byteLength+4+1+5,s=new d;s.appendRawBytes(new Uint8Array(n)),t(s);const r=s.buffer,o=new d;o.appendByte(e),o.appendUint53(r.byteLength-n);const a=o.buffer,i=new y;i.update(a),i.update(r.subarray(n));const l=i.digest(),c=l.subarray(0,4);return r.set(w,n-a.byteLength-4-w.byteLength),r.set(c,n-a.byteLength-4),r.set(a,n-a.byteLength),{hash:l,bytes:r.subarray(n-a.byteLength-4-w.byteLength)}}function Z(e,t){if(!a(e.readRawBytes(w.byteLength),w))throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");const n=e.readRawBytes(4),s=e.offset,r=e.readByte(),o=e.readUint53(),i={chunkType:r,chunkLength:o,chunkData:e.readRawBytes(o)};if(t){const t=new y;t.update(e.buf.subarray(s,e.offset));const r=t.digest();if(!a(r.subarray(0,4),n))throw new RangeError("checksum does not match data");i.hash=c(r)}return i}function G(e){const{changes:t,actorIds:n}=function(e,t){const n={},s=[];for(let t of e)t=r(t),n[t.actor]=!0,t.ops=L(t.ops,t.startOp,t.actor),t.ops=t.ops.map((e=>{"_root"!==(e=r(e)).obj&&(e.obj=o(e.obj)),e.elemId&&"_head"!==e.elemId&&(e.elemId=o(e.elemId)),e.child&&(e.child=o(e.child)),e.pred&&(e.pred=e.pred.map(o)),e.obj.actorId&&(n[e.obj.actorId]=!0),e.elemId&&e.elemId.actorId&&(n[e.elemId.actorId]=!0),e.child&&e.child.actorId&&(n[e.child.actorId]=!0);for(let t of e.pred)n[t.actorId]=!0;return e})),s.push(t);let a=Object.keys(n).sort();t&&(a=[e[0].actor].concat(a.filter((t=>t!==e[0].actor))));for(let e of s){e.actorNum=a.indexOf(e.actor);for(let t=0;t<e.ops.length;t++){let n=e.ops[t];n.id={counter:e.startOp+t,actorNum:e.actorNum,actorId:e.actor},n.obj=O(n.obj,a),n.elemId=O(n.elemId,a),n.child=O(n.child,a),n.pred=n.pred.map((e=>O(e,a)))}}return{changes:s,actorIds:a}}([e],!0),a=t[0],{hash:i,bytes:f}=q(1,(e=>{if(!Array.isArray(a.deps))throw new TypeError("deps is not an array");e.appendUint53(a.deps.length);for(let t of a.deps.slice().sort())e.appendRawBytes(l(t));e.appendHexString(a.actor),e.appendUint53(a.seq),e.appendUint53(a.startOp),e.appendInt53(a.time),e.appendPrefixedString(a.message||""),e.appendUint53(n.length-1);for(let t of n.slice(1))e.appendHexString(t);const t=function(e,t){const n={objActor:new h("uint"),objCtr:new h("uint"),keyActor:new h("uint"),keyCtr:new p,keyStr:new h("utf8"),insert:new g,action:new h("uint"),valLen:new h("uint"),valRaw:new d,chldActor:new h("uint"),chldCtr:new p};t?(n.idActor=new h("uint"),n.idCtr=new p,n.succNum=new h("uint"),n.succActor=new h("uint"),n.succCtr=new p):(n.predNum=new h("uint"),n.predCtr=new p,n.predActor=new h("uint"));for(let s of e)if(R(s,n),C(s,n),n.insert.appendValue(!!s.insert),V(s,n),S(s,n),s.child&&s.child.counter?(n.chldActor.appendValue(s.child.actorNum),n.chldCtr.appendValue(s.child.counter)):(n.chldActor.appendValue(null),n.chldCtr.appendValue(null)),t){n.idActor.appendValue(s.id.actorNum),n.idCtr.appendValue(s.id.counter),n.succNum.appendValue(s.succ.length),s.succ.sort(A);for(let e=0;e<s.succ.length;e++)n.succActor.appendValue(s.succ[e].actorNum),n.succCtr.appendValue(s.succ[e].counter)}else{n.predNum.appendValue(s.pred.length),s.pred.sort(A);for(let e=0;e<s.pred.length;e++)n.predActor.appendValue(s.pred[e].actorNum),n.predCtr.appendValue(s.pred[e].counter)}let s=[];for(let{columnName:e,columnId:r}of t?j:x)n[e]&&s.push({columnId:r,columnName:e,encoder:n[e]});return s.sort(((e,t)=>e.columnId-t.columnId))}(a.ops,!1);P(e,t);for(let n of t)e.appendRawBytes(n.encoder.buffer);a.extraBytes&&e.appendRawBytes(a.extraBytes)})),b=c(i);if(e.hash&&e.hash!==b)throw new RangeError(`Change hash does not match encoding: ${e.hash} != ${b}`);return f.byteLength>=256?function(e){const t=Z(new u(e),!1);if(1!==t.chunkType)throw new RangeError(`Unexpected chunk type: ${t.chunkType}`);const n=s.deflateRaw(t.chunkData),r=new d;return r.appendRawBytes(e.subarray(0,8)),r.appendByte(2),r.appendUint53(n.byteLength),r.appendRawBytes(n),r.buffer}(f):f}function K(e){2===e[8]&&(e=Y(e));const t=new u(e),n=Z(t,!0),s=new u(n.chunkData);if(!t.done)throw new RangeError("Encoded change has trailing data");if(1!==n.chunkType)throw new RangeError(`Unexpected chunk type: ${n.chunkType}`);const r=F(s),o=M(s);for(let e=0;e<o.length;e++){if(0!=(8&o[e].columnId))throw new RangeError("change must not contain deflated columns");o[e].buffer=s.readRawBytes(o[e].bufferLen)}if(!s.done){const e=s.buf.byteLength-s.offset;r.extraBytes=s.readRawBytes(e)}return r.columns=o,r.hash=n.hash,r}function W(e){const t=K(e);return t.ops=B($(t.columns,t.actorIds,x),!1),delete t.actorIds,delete t.columns,t}function Y(e){const t=Z(new u(e),!1);if(2!==t.chunkType)throw new RangeError(`Unexpected chunk type: ${t.chunkType}`);const n=s.inflateRaw(t.chunkData),r=new d;return r.appendRawBytes(e.subarray(0,8)),r.appendByte(1),r.appendUint53(n.byteLength),r.appendRawBytes(n),r.buffer}function J(e){let t=new u(e),n=[],s=0;for(;!t.done;)Z(t,!1),n.push(e.subarray(s,t.offset)),s=t.offset;return n}function X(e,t){if(e===t)return 0;if("_root"===e)return-1;if("_root"===t)return 1;const n=o(e),s=o(t);return n.counter<s.counter?-1:n.counter>s.counter?1:n.actorId<s.actorId?-1:n.actorId>s.actorId?1:0}function Q(e){const t=new u(e),n=Z(t,!0),s=new u(n.chunkData);if(!t.done)throw new RangeError("Encoded document has trailing data");if(0!==n.chunkType)throw new RangeError(`Unexpected chunk type: ${n.chunkType}`);const r=[],o=s.readUint53();for(let e=0;e<o;e++)r.push(s.readHexString());const a=[],i=[],l=s.readUint53();for(let e=0;e<l;e++)a.push(c(s.readRawBytes(32)));const d=M(s),h=M(s);for(let e=0;e<d.length;e++)d[e].buffer=s.readRawBytes(d[e].bufferLen),ne(d[e]);for(let e=0;e<h.length;e++)h[e].buffer=s.readRawBytes(h[e].bufferLen),ne(h[e]);if(!s.done)for(let e=0;e<l;e++)i.push(s.readUint53());return{changesColumns:d,opsColumns:h,actorIds:r,heads:a,headsIndexes:i,extraBytes:s.readRawBytes(s.buf.byteLength-s.offset)}}function ee(e){const{changesColumns:t,opsColumns:n,actorIds:s,heads:r}=Q(e),a=$(t,s,E);return function(e,t){let n={};for(let t of e){if(t.ops=[],n[t.actor]||(n[t.actor]=[]),t.seq!==n[t.actor].length+1)throw new RangeError(`Expected seq = ${n[t.actor].length+1}, got ${t.seq}`);if(t.seq>1&&n[t.actor][t.seq-2].maxOp>t.maxOp)throw new RangeError("maxOp must increase monotonically per actor");n[t.actor].push(t)}let s={};for(let e of t){if("del"===e.action)throw new RangeError("document should not contain del operations");e.pred=s[e.id]?s[e.id].pred:[],s[e.id]=e;for(let t of e.succ){if(!s[t])if(e.elemId){const n=e.insert?e.id:e.elemId;s[t]={id:t,action:"del",obj:e.obj,elemId:n,pred:[]}}else s[t]={id:t,action:"del",obj:e.obj,key:e.key,pred:[]};s[t].pred.push(e.id)}delete e.succ}for(let e of Object.values(s))"del"===e.action&&t.push(e);for(let e of t){const{counter:t,actorId:s}=o(e.id),r=n[s];let a=0,i=r.length;for(;a<i;){const e=Math.floor((a+i)/2);r[e].maxOp<t?a=e+1:i=e}if(a>=r.length)throw new RangeError(`Operation ID ${e.id} outside of allowed range`);r[a].ops.push(e)}for(let t of e){t.ops.sort(((e,t)=>X(e.id,t.id))),t.startOp=t.maxOp-t.ops.length+1,delete t.maxOp;for(let e=0;e<t.ops.length;e++){const n=t.ops[e],s=`${t.startOp+e}@${t.actor}`;if(n.id!==s)throw new RangeError(`Expected opId ${s}, got ${n.id}`);delete n.id}}}(a,B($(n,s,j),!0)),function(e,t){let n={};for(let t=0;t<e.length;t++){let s=e[t];s.deps=[];for(let r of s.depsNum.map((e=>e.depsIndex))){if(!e[r]||!e[r].hash)throw new RangeError(`No hash for index ${r} while processing index ${t}`);const o=e[r].hash;s.deps.push(o),n[o]&&delete n[o]}if(s.deps.sort(),delete s.depsNum,s.extraLen_datatype!==I.BYTES)throw new RangeError(`Bad datatype for extra bytes: ${I.BYTES}`);s.extraBytes=s.extraLen,delete s.extraLen_datatype,e[t]=W(G(s)),n[e[t].hash]=!0}const s=Object.keys(n).sort();let r=s.length===t.length,o=0;for(;r&&o<s.length;)r=s[o]===t[o],o++;if(!r)throw new RangeError(`Mismatched heads hashes: expected ${t.join(", ")}, got ${s.join(", ")}`)}(a,r),a}function te(e){e.encoder.buffer.byteLength>=256&&(e.encoder={buffer:s.deflateRaw(e.encoder.buffer)},e.columnId|=8)}function ne(e){0!=(8&e.columnId)&&(e.buffer=s.inflateRaw(e.buffer),e.columnId^=8)}e.exports={COLUMN_TYPE:_,VALUE_TYPE:I,ACTIONS:v,OBJECT_TYPE:{makeMap:"map",makeList:"list",makeText:"text",makeTable:"table"},DOC_OPS_COLUMNS:j,CHANGE_COLUMNS:x,DOCUMENT_COLUMNS:E,encoderByColumnId:function(e){return(7&e)===_.INT_DELTA?new p:(7&e)===_.BOOLEAN?new g:(7&e)===_.STRING_RLE?new h("utf8"):(7&e)===_.VALUE_RAW?new d:new h("uint")},decoderByColumnId:D,makeDecoders:H,decodeValue:N,splitContainers:J,encodeChange:G,decodeChangeColumns:K,decodeChange:W,decodeChangeMeta:function(e,t){2===e[8]&&(e=Y(e));const n=Z(new u(e),t);if(1!==n.chunkType)throw new RangeError("Buffer chunk type is not a change");const s=F(new u(n.chunkData));return s.change=e,t&&(s.hash=n.hash),s},decodeChanges:function(e){let t=[];for(let n of e)for(let e of J(n))0===e[8]?t=t.concat(ee(e)):1!==e[8]&&2!==e[8]||t.push(W(e));return t},encodeDocumentHeader:function(e){const{changesColumns:t,opsColumns:n,actorIds:s,heads:r,headsIndexes:o,extraBytes:a}=e;for(let e of t)te(e);for(let e of n)te(e);return q(0,(e=>{e.appendUint53(s.length);for(let t of s)e.appendHexString(t);e.appendUint53(r.length);for(let t of r.sort())e.appendRawBytes(l(t));P(e,t),P(e,n);for(let n of t)e.appendRawBytes(n.encoder.buffer);for(let t of n)e.appendRawBytes(t.encoder.buffer);for(let t of o)e.appendUint53(t);a&&e.appendRawBytes(a)})).bytes},decodeDocumentHeader:Q,decodeDocument:ee}},"./backend/encoding.js":
/*!*****************************!*\
  !*** ./backend/encoding.js ***!
  \*****************************/function(e){const t=new TextEncoder,n=new TextDecoder("utf-8");function s(e){return t.encode(e)}function r(e){return n.decode(e)}function o(e){if("string"!=typeof e)throw new TypeError("value is not a string");if(!/^([0-9a-f][0-9a-f])*$/.test(e))throw new RangeError("value is not hexadecimal");return""===e?new Uint8Array(0):new Uint8Array(e.match(/../g).map((e=>parseInt(e,16))))}const a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i=new Array(256);for(let e=0;e<256;e++)i[e]=`${a[e>>>4&15]}${a[15&e]}`;function l(e){let t="",n=e.byteLength;for(let s=0;s<n;s++)t+=i[e[s]];return t}class c{constructor(){this.buf=new Uint8Array(16),this.offset=0}get buffer(){return this.finish(),this.buf.subarray(0,this.offset)}grow(e=0){let t=4*this.buf.byteLength;for(;t<e;)t*=2;const n=new Uint8Array(t);return n.set(this.buf,0),this.buf=n,this}appendByte(e){this.offset>=this.buf.byteLength&&this.grow(),this.buf[this.offset]=e,this.offset+=1}appendUint32(e){if(!Number.isInteger(e))throw new RangeError("value is not an integer");if(e<0||e>4294967295)throw new RangeError("number out of range");const t=Math.max(1,Math.ceil((32-Math.clz32(e))/7));this.offset+t>this.buf.byteLength&&this.grow();for(let n=0;n<t;n++)this.buf[this.offset+n]=127&e|(n===t-1?0:128),e>>>=7;return this.offset+=t,t}appendInt32(e){if(!Number.isInteger(e))throw new RangeError("value is not an integer");if(e<-2147483648||e>2147483647)throw new RangeError("number out of range");const t=Math.ceil((33-Math.clz32(e>=0?e:-e-1))/7);this.offset+t>this.buf.byteLength&&this.grow();for(let n=0;n<t;n++)this.buf[this.offset+n]=127&e|(n===t-1?0:128),e>>=7;return this.offset+=t,t}appendUint53(e){if(!Number.isInteger(e))throw new RangeError("value is not an integer");if(e<0||e>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");const t=Math.floor(e/4294967296),n=(4294967295&e)>>>0;return this.appendUint64(t,n)}appendInt53(e){if(!Number.isInteger(e))throw new RangeError("value is not an integer");if(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");const t=Math.floor(e/4294967296),n=(4294967295&e)>>>0;return this.appendInt64(t,n)}appendUint64(e,t){if(!Number.isInteger(e)||!Number.isInteger(t))throw new RangeError("value is not an integer");if(e<0||e>4294967295||t<0||t>4294967295)throw new RangeError("number out of range");if(0===e)return this.appendUint32(t);const n=Math.ceil((64-Math.clz32(e))/7);this.offset+n>this.buf.byteLength&&this.grow();for(let e=0;e<4;e++)this.buf[this.offset+e]=127&t|128,t>>>=7;this.buf[this.offset+4]=15&t|(7&e)<<4|(5===n?0:128),e>>>=3;for(let t=5;t<n;t++)this.buf[this.offset+t]=127&e|(t===n-1?0:128),e>>>=7;return this.offset+=n,n}appendInt64(e,t){if(!Number.isInteger(e)||!Number.isInteger(t))throw new RangeError("value is not an integer");if(e<-2147483648||e>2147483647||t<-2147483648||t>4294967295)throw new RangeError("number out of range");if(t>>>=0,0===e&&t<=2147483647)return this.appendInt32(t);if(-1===e&&t>=2147483648)return this.appendInt32(t-4294967296);const n=Math.ceil((65-Math.clz32(e>=0?e:-e-1))/7);this.offset+n>this.buf.byteLength&&this.grow();for(let e=0;e<4;e++)this.buf[this.offset+e]=127&t|128,t>>>=7;this.buf[this.offset+4]=15&t|(7&e)<<4|(5===n?0:128),e>>=3;for(let t=5;t<n;t++)this.buf[this.offset+t]=127&e|(t===n-1?0:128),e>>=7;return this.offset+=n,n}appendRawBytes(e){return this.offset+e.byteLength>this.buf.byteLength&&this.grow(this.offset+e.byteLength),this.buf.set(e,this.offset),this.offset+=e.byteLength,e.byteLength}appendRawString(e){if("string"!=typeof e)throw new TypeError("value is not a string");return this.appendRawBytes(s(e))}appendPrefixedBytes(e){return this.appendUint53(e.byteLength),this.appendRawBytes(e),this}appendPrefixedString(e){if("string"!=typeof e)throw new TypeError("value is not a string");return this.appendPrefixedBytes(s(e)),this}appendHexString(e){return this.appendPrefixedBytes(o(e)),this}finish(){}}class d{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError(`Not a byte array: ${e}`);this.buf=e,this.offset=0}get done(){return this.offset===this.buf.byteLength}reset(){this.offset=0}skip(e){if(this.offset+e>this.buf.byteLength)throw new RangeError("cannot skip beyond end of buffer");this.offset+=e}readByte(){return this.offset+=1,this.buf[this.offset-1]}readUint32(){let e=0,t=0;for(;this.offset<this.buf.byteLength;){const n=this.buf[this.offset];if(28===t&&0!=(240&n))throw new RangeError("number out of range");if(e=(e|(127&n)<<t)>>>0,t+=7,this.offset++,0==(128&n))return e}throw new RangeError("buffer ended with incomplete number")}readInt32(){let e=0,t=0;for(;this.offset<this.buf.byteLength;){const n=this.buf[this.offset];if(28===t&&0!=(128&n)||28===t&&0==(64&n)&&0!=(56&n)||28===t&&0!=(64&n)&&56!=(56&n))throw new RangeError("number out of range");if(e|=(127&n)<<t,t+=7,this.offset++,0==(128&n))return 0==(64&n)||t>28?e:e|-1<<t}throw new RangeError("buffer ended with incomplete number")}readUint53(){const{low32:e,high32:t}=this.readUint64();if(t<0||t>2097151)throw new RangeError("number out of range");return 4294967296*t+e}readInt53(){const{low32:e,high32:t}=this.readInt64();if(t<-2097152||-2097152===t&&0===e||t>2097151)throw new RangeError("number out of range");return 4294967296*t+e}readUint64(){let e=0,t=0,n=0;for(;this.offset<this.buf.byteLength&&n<=28;){const s=this.buf[this.offset];if(e=(e|(127&s)<<n)>>>0,28===n&&(t=(112&s)>>>4),n+=7,this.offset++,0==(128&s))return{high32:t,low32:e}}for(n=3;this.offset<this.buf.byteLength;){const s=this.buf[this.offset];if(31===n&&0!=(254&s))throw new RangeError("number out of range");if(t=(t|(127&s)<<n)>>>0,n+=7,this.offset++,0==(128&s))return{high32:t,low32:e}}throw new RangeError("buffer ended with incomplete number")}readInt64(){let e=0,t=0,n=0;for(;this.offset<this.buf.byteLength&&n<=28;){const s=this.buf[this.offset];if(e=(e|(127&s)<<n)>>>0,28===n&&(t=(112&s)>>>4),n+=7,this.offset++,0==(128&s))return 0!=(64&s)&&(n<32&&(e=(e|-1<<n)>>>0),t|=-1<<Math.max(n-32,0)),{high32:t,low32:e}}for(n=3;this.offset<this.buf.byteLength;){const s=this.buf[this.offset];if(31===n&&0!==s&&127!==s)throw new RangeError("number out of range");if(t|=(127&s)<<n,n+=7,this.offset++,0==(128&s))return 0!=(64&s)&&n<32&&(t|=-1<<n),{high32:t,low32:e}}throw new RangeError("buffer ended with incomplete number")}readRawBytes(e){const t=this.offset;if(t+e>this.buf.byteLength)throw new RangeError("subarray exceeds buffer size");return this.offset+=e,this.buf.subarray(t,this.offset)}readRawString(e){return r(this.readRawBytes(e))}readPrefixedBytes(){return this.readRawBytes(this.readUint53())}readPrefixedString(){return r(this.readPrefixedBytes())}readHexString(){return l(this.readPrefixedBytes())}}class u extends c{constructor(e){super(),this.type=e,this.state="empty",this.lastValue=void 0,this.count=0,this.literal=[]}appendValue(e,t=1){this._appendValue(e,t)}_appendValue(e,t=1){t<=0||("empty"===this.state?(this.state=null===e?"nulls":1===t?"loneValue":"repetition",this.lastValue=e,this.count=t):"loneValue"===this.state?null===e?(this.flush(),this.state="nulls",this.count=t):e===this.lastValue?(this.state="repetition",this.count=1+t):t>1?(this.flush(),this.state="repetition",this.count=t,this.lastValue=e):(this.state="literal",this.literal=[this.lastValue],this.lastValue=e):"repetition"===this.state?null===e?(this.flush(),this.state="nulls",this.count=t):e===this.lastValue?this.count+=t:t>1?(this.flush(),this.state="repetition",this.count=t,this.lastValue=e):(this.flush(),this.state="loneValue",this.lastValue=e):"literal"===this.state?null===e?(this.literal.push(this.lastValue),this.flush(),this.state="nulls",this.count=t):e===this.lastValue?(this.flush(),this.state="repetition",this.count=1+t):t>1?(this.literal.push(this.lastValue),this.flush(),this.state="repetition",this.count=t,this.lastValue=e):(this.literal.push(this.lastValue),this.lastValue=e):"nulls"===this.state&&(null===e?this.count+=t:t>1?(this.flush(),this.state="repetition",this.count=t,this.lastValue=e):(this.flush(),this.state="loneValue",this.lastValue=e)))}copyFrom(e,t={}){const{count:n,sumValues:s,sumShift:r}=t;if(!(e instanceof h)||e.type!==this.type)throw new TypeError("incompatible type of decoder");let o="number"==typeof n?n:Number.MAX_SAFE_INTEGER,a=0,i=0;if(n&&o>0&&e.done)throw new RangeError(`cannot copy ${n} values`);if(0===o||e.done)return s?{nonNullValues:a,sum:i}:{nonNullValues:a};let l=e.readValue();if(null===l){const t=Math.min(e.count+1,o);if(o-=t,e.count-=t-1,this.appendValue(null,t),n&&o>0&&e.done)throw new RangeError(`cannot copy ${n} values`);if(0===o||e.done)return s?{nonNullValues:a,sum:i}:{nonNullValues:a};if(l=e.readValue(),null===l)throw new RangeError("null run must be followed by non-null value")}if(this.appendValue(l),o--,a++,s&&(i+=r?l>>>r:l),n&&o>0&&e.done)throw new RangeError(`cannot copy ${n} values`);if(0===o||e.done)return s?{nonNullValues:a,sum:i}:{nonNullValues:a};let c=e.count>0;for(;o>0&&!e.done;){c||e.readRecord();const t=Math.min(e.count,o);if(e.count-=t,"literal"===e.state){a+=t;for(let n=0;n<t;n++){if(e.done)throw new RangeError("incomplete literal");const t=e.readRawValue();if(t===e.lastValue)throw new RangeError("Repetition of values is not allowed in literal");e.lastValue=t,this._appendValue(t),s&&(i+=r?t>>>r:t)}}else if("repetition"===e.state){a+=t,s&&(i+=t*(r?e.lastValue>>>r:e.lastValue));const n=e.lastValue;if(this._appendValue(n),t>1){if(this._appendValue(n),"repetition"!==this.state)throw new RangeError(`Unexpected state ${this.state}`);this.count+=t-2}}else if("nulls"===e.state){if(this._appendValue(null),"nulls"!==this.state)throw new RangeError(`Unexpected state ${this.state}`);this.count+=t-1}c=!1,o-=t}if(n&&o>0&&e.done)throw new RangeError(`cannot copy ${n} values`);return s?{nonNullValues:a,sum:i}:{nonNullValues:a}}flush(){if("loneValue"===this.state)this.appendInt32(-1),this.appendRawValue(this.lastValue);else if("repetition"===this.state)this.appendInt53(this.count),this.appendRawValue(this.lastValue);else if("literal"===this.state){this.appendInt53(-this.literal.length);for(let e of this.literal)this.appendRawValue(e)}else"nulls"===this.state&&(this.appendInt32(0),this.appendUint53(this.count));this.state="empty"}appendRawValue(e){if("int"===this.type)this.appendInt53(e);else if("uint"===this.type)this.appendUint53(e);else{if("utf8"!==this.type)throw new RangeError(`Unknown RLEEncoder datatype: ${this.type}`);this.appendPrefixedString(e)}}finish(){"literal"===this.state&&this.literal.push(this.lastValue),("nulls"!==this.state||this.offset>0)&&this.flush()}}class h extends d{constructor(e,t){super(t),this.type=e,this.lastValue=void 0,this.count=0,this.state=void 0}get done(){return 0===this.count&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0}readValue(){if(this.done)return null;if(0===this.count&&this.readRecord(),this.count-=1,"literal"===this.state){const e=this.readRawValue();if(e===this.lastValue)throw new RangeError("Repetition of values is not allowed in literal");return this.lastValue=e,e}return this.lastValue}skipValues(e){for(;e>0&&!this.done;){0===this.count&&(this.count=this.readInt53(),this.count>0?(this.lastValue=this.count<=e?this.skipRawValues(1):this.readRawValue(),this.state="repetition"):this.count<0?(this.count=-this.count,this.state="literal"):(this.count=this.readUint53(),this.lastValue=null,this.state="nulls"));const t=Math.min(e,this.count);"literal"===this.state&&this.skipRawValues(t),e-=t,this.count-=t}}readRecord(){if(this.count=this.readInt53(),this.count>1){const e=this.readRawValue();if(("repetition"===this.state||"literal"===this.state)&&this.lastValue===e)throw new RangeError("Successive repetitions with the same value are not allowed");this.state="repetition",this.lastValue=e}else{if(1===this.count)throw new RangeError("Repetition count of 1 is not allowed, use a literal instead");if(this.count<0){if(this.count=-this.count,"literal"===this.state)throw new RangeError("Successive literals are not allowed");this.state="literal"}else{if("nulls"===this.state)throw new RangeError("Successive null runs are not allowed");if(this.count=this.readUint53(),0===this.count)throw new RangeError("Zero-length null runs are not allowed");this.lastValue=null,this.state="nulls"}}}readRawValue(){if("int"===this.type)return this.readInt53();if("uint"===this.type)return this.readUint53();if("utf8"===this.type)return this.readPrefixedString();throw new RangeError(`Unknown RLEDecoder datatype: ${this.type}`)}skipRawValues(e){if("utf8"===this.type)for(let t=0;t<e;t++)this.skip(this.readUint53());else{for(;e>0&&this.offset<this.buf.byteLength;)0==(128&this.buf[this.offset])&&e--,this.offset++;if(e>0)throw new RangeError("cannot skip beyond end of buffer")}}}class f extends h{constructor(e){super("int",e),this.absoluteValue=0}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0,this.absoluteValue=0}readValue(){const e=super.readValue();return null===e?null:(this.absoluteValue+=e,this.absoluteValue)}skipValues(e){for(;e>0&&!this.done;){0===this.count&&this.readRecord();const t=Math.min(e,this.count);if("literal"===this.state)for(let e=0;e<t;e++)this.lastValue=this.readRawValue(),this.absoluteValue+=this.lastValue;else"repetition"===this.state&&(this.absoluteValue+=t*this.lastValue);e-=t,this.count-=t}}}class p extends d{constructor(e){super(e),this.lastValue=!0,this.firstRun=!0,this.count=0}get done(){return 0===this.count&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=!0,this.firstRun=!0,this.count=0}readValue(){if(this.done)return!1;for(;0===this.count;){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,0===this.count&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}return this.count-=1,this.lastValue}skipValues(e){for(;e>0&&!this.done;){if(0===this.count){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,0===this.count&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}this.count<e?(e-=this.count,this.count=0):(this.count-=e,e=0)}}}e.exports={stringToUtf8:s,utf8ToString:r,hexStringToBytes:o,bytesToHexString:l,Encoder:c,Decoder:d,RLEEncoder:u,RLEDecoder:h,DeltaEncoder:class extends u{constructor(){super("int"),this.absoluteValue=0}appendValue(e,t=1){t<=0||("number"==typeof e?(super.appendValue(e-this.absoluteValue,1),this.absoluteValue=e,t>1&&super.appendValue(0,t-1)):super.appendValue(e,t))}copyFrom(e,t={}){if(t.sumValues)throw new RangeError("unsupported options for DeltaEncoder.copyFrom()");if(!(e instanceof f))throw new TypeError("incompatible type of decoder");let n=t.count;if(n>0&&e.done)throw new RangeError(`cannot copy ${n} values`);if(0===n||e.done)return;let s=e.readValue(),r=0;if(this.appendValue(s),null===s){if(r=e.count+1,void 0!==n&&n<r&&(r=n),e.count-=r-1,this.count+=r-1,n>r&&e.done)throw new RangeError(`cannot copy ${n} values`);if(n===r||e.done)return;0===e.count&&this.appendValue(e.readValue())}void 0!==n&&(n-=r+1);const{nonNullValues:o,sum:a}=super.copyFrom(e,{count:n,sumValues:!0});o>0&&(this.absoluteValue=a,e.absoluteValue=a)}},DeltaDecoder:f,BooleanEncoder:class extends c{constructor(){super(),this.lastValue=!1,this.count=0}appendValue(e,t=1){if(!1!==e&&!0!==e)throw new RangeError(`Unsupported value for BooleanEncoder: ${e}`);t<=0||(this.lastValue===e?this.count+=t:(this.appendUint53(this.count),this.lastValue=e,this.count=t))}copyFrom(e,t={}){if(!(e instanceof p))throw new TypeError("incompatible type of decoder");const{count:n}=t;let s="number"==typeof n?n:Number.MAX_SAFE_INTEGER;if(n&&s>0&&e.done)throw new RangeError(`cannot copy ${n} values`);if(0===s||e.done)return;this.appendValue(e.readValue()),s--;const r=Math.min(e.count,s);for(this.count+=r,e.count-=r,s-=r;s>0&&!e.done;){if(e.count=e.readUint53(),0===e.count)throw new RangeError("Zero-length runs are not allowed");e.lastValue=!e.lastValue,this.appendUint53(this.count);const t=Math.min(e.count,s);this.count=t,this.lastValue=e.lastValue,e.count-=t,s-=t}if(n&&s>0&&e.done)throw new RangeError(`cannot copy ${n} values`)}finish(){this.count>0&&(this.appendUint53(this.count),this.count=0)}},BooleanDecoder:p}},"./backend/index.js":
/*!**************************!*\
  !*** ./backend/index.js ***!
  \**************************/function(e,t,n){const{init:s,clone:r,free:o,applyChanges:a,applyLocalChange:i,save:l,load:c,loadChanges:d,getPatch:u,getHeads:h,getAllChanges:f,getChanges:p,getChangesAdded:b,getChangeByHash:g,getMissingDeps:m}=n(/*! ./backend */"./backend/backend.js"),{receiveSyncMessage:y,generateSyncMessage:w,encodeSyncMessage:_,decodeSyncMessage:I,encodeSyncState:v,decodeSyncState:k,initSyncState:x}=n(/*! ./sync */"./backend/sync.js");e.exports={init:s,clone:r,free:o,applyChanges:a,applyLocalChange:i,save:l,load:c,loadChanges:d,getPatch:u,getHeads:h,getAllChanges:f,getChanges:p,getChangesAdded:b,getChangeByHash:g,getMissingDeps:m,receiveSyncMessage:y,generateSyncMessage:w,encodeSyncMessage:_,decodeSyncMessage:I,encodeSyncState:v,decodeSyncState:k,initSyncState:x}},"./backend/new.js":
/*!************************!*\
  !*** ./backend/new.js ***!
  \************************/function(e,t,n){const{parseOpId:s,copyObject:r}=n(/*! ../src/common */"./src/common.js"),{COLUMN_TYPE:o,VALUE_TYPE:a,ACTIONS:i,OBJECT_TYPE:l,DOC_OPS_COLUMNS:c,CHANGE_COLUMNS:d,DOCUMENT_COLUMNS:u,encoderByColumnId:h,decoderByColumnId:f,makeDecoders:p,decodeValue:b,encodeChange:g,decodeChangeColumns:m,decodeChangeMeta:y,decodeChanges:w,decodeDocumentHeader:_,encodeDocumentHeader:I}=n(/*! ./columnar */"./backend/columnar.js"),v=600,k=Math.floor(750),x=d.filter((e=>["predNum","predActor","predCtr"].includes(e.columnName))).map((e=>e.columnId));function j(e,t,n){if(1===t.length)e[t[0]]=n;else{let s=Object.assign({},e[t[0]]);j(s,t.slice(1),n),e[t[0]]=s}}function E(e,t,n,s){for(let e of t)e.decoder.reset();const{objActor:r,objCtr:o,keyActor:a,keyCtr:i,keyStr:l,idActor:c,idCtr:d,insert:u}=e,[h,f,,,p,b,g,m,y,,,,,w]=t.map((e=>e.decoder));let _=0,I=0,v=!1,k=null,x=null,j=null,E=null,O=null,A=null,R=0;if(null!==o&&!s)for(;(!f.done||!h.done||!y.done)&&(x=f.readValue(),k=n[h.readValue()],y.skipValues(1),null===x||!k||x<o||x===o&&k<r);)_+=1;if((x!==o||k!==r)&&!s)return{found:!0,skipCount:_,visibleCount:I};if(null!==l){for(p.skipValues(_);!p.done;){const e=h.readValue();if(k=null===e?null:n[e],x=f.readValue(),O=p.readValue(),!(null!==O&&O<l&&x===o&&k===r))break;_+=1}return{found:!0,skipCount:_,visibleCount:I}}if(g.skipValues(_),b.skipValues(_),m.skipValues(_),w.skipValues(_),E=g.readValue(),j=n[b.readValue()],A=m.readValue(),R=w.readValue(),u){if(!s&&null!==i&&i>0&&null!==a){for(_+=1;!(g.done||b.done||E===i&&j===a)&&(A&&(v=!1),0!==R||v||(I+=1,v=!0),E=g.readValue(),j=n[b.readValue()],x=f.readValue(),k=n[h.readValue()],A=m.readValue(),R=w.readValue(),x===o&&k===r);)_+=1;if(x!==o||k!==r||E!==i||j!==a||!A)return{found:!1,skipCount:_,visibleCount:I};if(A&&(v=!1),0!==R||v||(I+=1,v=!0),g.done||b.done)return{found:!0,skipCount:_,visibleCount:I};E=g.readValue(),j=n[b.readValue()],x=f.readValue(),k=n[h.readValue()],A=m.readValue(),R=w.readValue()}for(;(!A||E>d||E===d&&j>c)&&x===o&&k===r&&(_+=1,A&&(v=!1),0!==R||v||(I+=1,v=!0),!g.done&&!b.done);)E=g.readValue(),j=n[b.readValue()],x=f.readValue(),k=n[h.readValue()],A=m.readValue(),R=w.readValue()}else if(null!==i&&i>0&&null!==a){for(;!(A&&E===i&&j===a||x!==o||k!==r||(_+=1,A&&(v=!1),0!==R||v||(I+=1,v=!0),g.done||b.done));)E=g.readValue(),j=n[b.readValue()],x=f.readValue(),k=n[h.readValue()],A=m.readValue(),R=w.readValue();if(x!==o||k!==r||E!==i||j!==a||!A)return{found:!1,skipCount:_,visibleCount:I}}return{found:!0,skipCount:_,visibleCount:I}}function O(e,t,n,s){const r=e.blocks[t],o=e.blocks[t+1];return r.lastObjectActor!==n||r.lastObjectCtr!==s||void 0===r.numVisible?0:r.lastVisibleActor===o.firstVisibleActor&&void 0!==r.lastVisibleActor&&r.lastVisibleCtr===o.firstVisibleCtr&&void 0!==r.lastVisibleCtr?r.numVisible-1:r.numVisible}function A(e,t){const{objActor:n,objActorNum:s,objCtr:r,keyActor:o,keyCtr:a,keyStr:i}=t;let l=0,c=0;if(null!==r)for(;l<e.blocks.length-1;){const t=void 0===e.blocks[l].lastObjectActor?void 0:e.actorIds[e.blocks[l].lastObjectActor],s=e.blocks[l].lastObjectCtr;if(!(null===s||s<r||s===r&&t<n))break;l++}if(null!==i){for(;l<e.blocks.length-1;){const{lastObjectActor:t,lastObjectCtr:n,lastKey:o}=e.blocks[l];if(!(r===n&&s===t&&void 0!==o&&o<i))break;l++}const{skipCount:n}=E(t,e.blocks[l].columns,e.actorIds,!1);return{blockIndex:l,skipCount:n,visibleCount:0}}{const n=null===a||0===a||null===o,i=null===o?null:e.actorIds.indexOf(o);let d=!1;for(;;){if(!n&&!d)for(;l<e.blocks.length-1&&e.blocks[l].lastObjectActor===s&&e.blocks[l].lastObjectCtr===r&&!C(e.blocks[l].bloom,i,a);){if(e.blocks[l].lastObjectCtr>r)throw new RangeError(`Reference element not found: ${a}@${o}`);c+=O(e,l,s,r),l++}const{found:u,skipCount:h,visibleCount:f}=E(t,e.blocks[l].columns,e.actorIds,d);if(l===e.blocks.length-1||e.blocks[l].lastObjectActor!==s||e.blocks[l].lastObjectCtr!==r){if(u)return{blockIndex:l,skipCount:h,visibleCount:c+f};throw new RangeError(`Reference element not found: ${a}@${o}`)}if(u&&h<e.blocks[l].numOps)return{blockIndex:l,skipCount:h,visibleCount:c+f};d=u&&t.insert,c+=O(e,l,s,r),l++}}}function R(e,t,n){let s=8*e.byteLength,r=n%s,o=t%s,a=(16777619*(n^t)>>>0)%s;for(let t=0;t<7;t++)e[r>>>3]|=1<<(7&r),r=(r+o)%s,o=(o+a)%s}function C(e,t,n){let s=8*e.byteLength,r=n%s,o=t%s,a=(16777619*(n^t)>>>0)%s;for(let t=0;t<7;t++){if(0==(e[r>>>3]&1<<(7&r)))return!1;r=(r+o)%s,o=(o+a)%s}return!0}function V(e){e.bloom=new Uint8Array(k),e.numOps=0,e.lastKey=void 0,e.numVisible=void 0,e.lastObjectActor=void 0,e.lastObjectCtr=void 0,e.firstVisibleActor=void 0,e.firstVisibleCtr=void 0,e.lastVisibleActor=void 0,e.lastVisibleCtr=void 0;for(let t of e.columns)t.decoder.reset();const[t,n,s,r,o,a,i,l,,,,,,c]=e.columns.map((e=>e.decoder));for(;!i.done;){e.numOps+=1;const d=t.readValue(),u=n.readValue(),h=s.readValue(),f=r.readValue(),p=o.readValue(),b=a.readValue(),g=i.readValue(),m=l.readValue(),y=c.readValue();if(e.lastObjectActor===d&&e.lastObjectCtr===u||(e.numVisible=0,e.lastObjectActor=d,e.lastObjectCtr=u),null!==p)e.lastKey=p;else if(m||null!==f){e.lastKey=void 0;const t=m?b:h,n=m?g:f;R(e.bloom,t,n),0===y&&(void 0===e.firstVisibleActor&&(e.firstVisibleActor=t),void 0===e.firstVisibleCtr&&(e.firstVisibleCtr=n),e.lastVisibleActor===t&&e.lastVisibleCtr===n||(e.numVisible+=1,e.lastVisibleActor=t,e.lastVisibleCtr=n))}}}function S(e,t,n,s){if(null!==t[4])e.lastObjectCtr===t[1]&&e.lastObjectActor===t[0]&&(void 0===e.lastKey||e.lastKey<t[4])&&(e.lastKey=t[4]);else{const n=t[7]?t[5]:t[2],r=t[7]?t[6]:t[3];R(e.bloom,n,r),(0===t[13]||s)&&(void 0===e.firstVisibleActor&&(e.firstVisibleActor=n),void 0===e.firstVisibleCtr&&(e.firstVisibleCtr=r),e.lastVisibleActor=n,e.lastVisibleCtr=r)}(void 0===e.lastObjectCtr||null!==t[0]&&null!==t[1]&&(null===e.lastObjectCtr||e.lastObjectCtr<t[1]||e.lastObjectCtr===t[1]&&n[e.lastObjectActor]<n[t[0]]))&&(e.lastObjectActor=t[0],e.lastObjectCtr=t[1],e.lastKey=null!==t[4]?t[4]:void 0,e.numVisible=0)}function N(e){for(let t of e.columns)t.decoder.reset();const t=Math.ceil(e.numOps/480);let n=[],s=0;for(let r=1;r<=t;r++){const o=Math.ceil(r*e.numOps/t)-s,a=e.columns.map((e=>({columnId:e.columnId,encoder:h(e.columnId)})));U(a,e.columns,o);const i={columns:a.map((e=>{const t=f(e.columnId,e.encoder.buffer);return{columnId:e.columnId,decoder:t}}))};V(i),n.push(i),s+=o}return n}function T(e){const t=e[0].columns.map((e=>({columnId:e.columnId,encoder:h(e.columnId)})));for(let n of e){for(let e of n.columns)e.decoder.reset();U(t,n.columns,n.numOps)}return t}function U(e,t,n){if(0===n)return;let s=0,r=-1,a=0,i=-1,l=0;for(let c of e){for(;s<t.length&&t[s].columnId<c.columnId;)s++;let e=null;s<t.length&&t[s].columnId===c.columnId&&t[s].decoder.buf.byteLength>0&&(e=t[s].decoder);const d=c.columnId>>4===r?a:n;if(c.columnId%8===o.GROUP_CARD)r=c.columnId>>4,e?a=c.encoder.copyFrom(e,{count:n,sumValues:!0}).sum:(c.encoder.appendValue(0,n),a=0);else if(c.columnId%8===o.VALUE_LEN)if(e){if(s+1===t.length||t[s+1].columnId!==c.columnId+1)throw new RangeError("VALUE_LEN column without accompanying VALUE_RAW column");i=c.columnId+1,l=c.encoder.copyFrom(e,{count:d,sumValues:!0,sumShift:4}).sum}else c.encoder.appendValue(null,d),i=c.columnId+1,l=0;else if(c.columnId%8===o.VALUE_RAW){if(c.columnId!==i)throw new RangeError("VALUE_RAW column without accompanying VALUE_LEN column");l>0&&c.encoder.appendRawBytes(e.readRawBytes(l))}else if(e)c.encoder.copyFrom(e,{count:d});else{const e=c.columnId%8!==o.BOOLEAN&&null;c.encoder.appendValue(e,d)}}}function L(e,t){let n,s=[],r=-1,a=0,i=-1,l=0;for(let c of e){if(c.columnId%8===o.VALUE_RAW){if(c.columnId!==i)throw new RangeError("unexpected VALUE_RAW column");n=c.decoder.readRawBytes(l)}else if(c.columnId%8===o.GROUP_CARD)r=c.columnId>>4,a=c.decoder.readValue()||0,n=a;else if(c.columnId>>4===r){n=[],c.columnId%8===o.VALUE_LEN&&(i=c.columnId+1,l=0);for(let e=0;e<a;e++){let e=c.decoder.readValue();c.columnId%8===o.ACTOR_ID&&t&&"number"==typeof e&&(e=t[e]),c.columnId%8===o.VALUE_LEN&&(l+=n>>>4),n.push(e)}}else n=c.decoder.readValue(),c.columnId%8===o.ACTOR_ID&&t&&"number"==typeof n&&(n=t[n]),c.columnId%8===o.VALUE_LEN&&(i=c.columnId+1,l=n>>>4);s.push(n)}return s}function B(e,t,n){let s=0,r=-1,a=0;for(let i of e){for(;s<t.length&&t[s].columnId<i.columnId;)s++;if(s<t.length&&t[s].columnId===i.columnId){const e=n[s];if(i.columnId%8===o.GROUP_CARD)r=i.columnId>>4,a=e,i.encoder.appendValue(e);else if(i.columnId>>4===r){if(!Array.isArray(e)||e.length!==a)throw new RangeError("bad group value");for(let t of e)i.encoder.appendValue(t)}else i.columnId%8===o.VALUE_RAW?e&&i.encoder.appendRawBytes(e):i.encoder.appendValue(e)}else if(i.columnId%8===o.GROUP_CARD)r=i.columnId>>4,a=0,i.encoder.appendValue(0);else if(i.columnId%8!==o.VALUE_RAW){const e=i.columnId>>4===r?a:1;let t=null;i.columnId%8===o.BOOLEAN&&(t=!1),i.columnId%8===o.VALUE_LEN&&(t=0),i.encoder.appendValue(t,e)}}}function z(e,t){let n=e.blocks[t];if(n.columns[8].decoder.done){if(t===e.blocks.length-1)return{docOp:null,blockIndex:t};t+=1,n=e.blocks[t];for(let e of n.columns)e.decoder.reset();return{docOp:L(n.columns),blockIndex:t}}return{docOp:L(n.columns),blockIndex:t}}function D(e,t){for(;t.changeIndex<t.changes.length-1&&(!t.columns||t.columns[8].decoder.done);){t.changeIndex+=1;const n=t.changes[t.changeIndex];t.columns=p(n.columns,d),t.opCtr=n.startOp,t.columns[8].decoder.done&&(n.maxOp=n.startOp-1),Z(e,t.columns);const{actorIds:s,actorTable:r}=G(e.actorIds,n);e.actorIds=s,t.actorTable=r,t.actorIndex=e.actorIds.indexOf(n.actorIds[0])}if(t.columns[8].decoder.done)return t.done=!0,void(t.nextOp=null);t.nextOp=L(t.columns,t.actorTable),t.nextOp[5]=t.actorIndex,t.nextOp[6]=t.opCtr,t.changes[t.changeIndex].maxOp=t.opCtr,t.opCtr>e.maxOp&&(e.maxOp=t.opCtr),t.opCtr+=1;const n=t.nextOp;if(null===n[1]&&null!==n[0]||null!==n[1]&&null===n[0])throw new RangeError(`Mismatched object reference: (${n[1]}, ${n[0]})`);if(null===n[3]&&null!==n[2]||0===n[3]&&null!==n[2]||n[3]>0&&null===n[2])throw new RangeError(`Mismatched operation key: (${n[3]}, ${n[2]})`)}function H(e,t){return"list"===t||"text"===t?{objectId:e,type:t,edits:[]}:{objectId:e,type:t,props:{}}}function $(e,t,n=1){const r=s(e),o=s(t);return r.actorId===o.actorId&&r.counter+n===o.counter}function M(e,t){if(0===e.length)return void e.push(t);let n=e[e.length-1];"insert"===n.action&&"insert"===t.action&&n.index===t.index-1&&"value"===n.value.type&&"value"===t.value.type&&n.elemId===n.opId&&t.elemId===t.opId&&$(n.elemId,t.elemId,1)&&n.value.datatype===t.value.datatype&&typeof n.value.value==typeof t.value.value?(n.action="multi-insert",t.value.datatype&&(n.datatype=t.value.datatype),n.values=[n.value.value,t.value.value],delete n.value,delete n.opId):"multi-insert"===n.action&&"insert"===t.action&&n.index+n.values.length===t.index&&"value"===t.value.type&&t.elemId===t.opId&&$(n.elemId,t.elemId,n.values.length)&&n.datatype===t.value.datatype&&typeof n.values[0]==typeof t.value.value?n.values.push(t.value.value):"remove"===n.action&&"remove"===t.action&&n.index===t.index?n.count+=t.count:e.push(t)}function P(e,t,n,s,r,o){let a=!1;if(o)for(;!a&&e.length>0;){const n=e[e.length-1];if("insert"!==n.action&&"update"!==n.action||n.index!==t){if("multi-insert"!==n.action||n.index+n.values.length-1!==t)break;n.values.pop(),a=!0}else e.pop(),a="insert"===n.action}M(e,a?{action:"insert",index:t,elemId:n,opId:s,value:r}:{action:"update",index:t,opId:s,value:r})}function F(e,t,n,s,r,o,c,d){const u=!t,h=s[8]<i.length?l[i[s[8]]]:null,f=`${s[6]}@${r.actorIds[s[5]]}`,p=s[7]?s[5]:s[2],g=s[7]?s[6]:s[3],m=s[4]?s[4]:`${g}@${r.actorIds[p]}`;s[8]%2!=0||r.objectMeta[f]||(r.objectMeta[f]={parentObj:n,parentKey:m,opId:f,type:h,children:{}},j(r.objectMeta,[n,"children",m,f],{objectId:f,type:h,props:{}}));const y=!o[m];o[m]||(o[m]={visibleOps:[],hasChild:!1});const w=void 0!==d&&s[13]>0;w||(o[m].visibleOps.push(s),o[m].hasChild=o[m].hasChild||s[8]%2==0);const _=r.objectMeta[n].children[m];if(o[m].hasChild||_&&Object.keys(_).length>0){let e={};for(let t of o[m].visibleOps){const n=`${t[6]}@${r.actorIds[t[5]]}`;if("set"===i[t[8]])e[n]=Object.assign({type:"value"},b(t[9],t[10]));else if(t[8]%2==0){const s=t[8]<i.length?l[i[t[8]]]:null;e[n]=H(n,s)}}j(r.objectMeta,[n,"children",m],e)}let I,v;if(w&&"set"===i[s[8]]&&(15&s[9])===a.COUNTER){o[m]||(o[m]={visibleOps:[],hasChild:!1}),o[m].counterStates||(o[m].counterStates={});let e=o[m].counterStates,t={opId:f,value:b(s[9],s[10]).value,succs:{}};for(let n=0;n<s[13];n++){const o=`${s[15][n]}@${r.actorIds[s[14][n]]}`;e[o]=t,t.succs[o]=!0}}else if("inc"===i[s[8]]){if(!o[m]||!o[m].counterStates||!o[m].counterStates[f])throw new RangeError(`increment operation ${f} for unknown counter`);let e=o[m].counterStates[f];e.value+=b(s[9],s[10]).value,delete e.succs[f],0===Object.keys(e.succs).length&&(I=e.opId,v={type:"value",datatype:"counter",value:e.value})}else w||("set"===i[s[8]]?(I=f,v=Object.assign({type:"value"},b(s[9],s[10]))):s[8]%2==0&&(e[f]||(e[f]=H(f,h)),I=f,v=e[f]));e[n]||(e[n]=H(n,r.objectMeta[n].type));const k=e[n];if(null===s[4])if(0!==d||u||"insert"!==o[m].action||(o[m].action="update",function(e,t,n){let s=[];for(;e.length>0;){let n=e[e.length-1];if("insert"===n.action){if(n.index!==t)throw new RangeError("last edit has unexpected index");s.unshift(e.pop());break}if("update"!==n.action)throw new RangeError("last edit has unexpected action");if(n.index!==t)throw new RangeError("last edit has unexpected index");s.unshift(e.pop())}let r=!0;for(let o of s)P(e,t,n,o.opId,o.value,r),r=!1}(k.edits,c,m),t&&t.lastObjectActor===s[0]&&t.lastObjectCtr===s[1]&&(t.numVisible-=1)),v)if(o[m].action||void 0!==d&&!u)if("remove"===o[m].action){let e=k.edits[k.edits.length-1];if("remove"!==e.action)throw new RangeError("last edit has unexpected type");e.count>1?e.count-=1:k.edits.pop(),o[m].action="update",P(k.edits,c,m,I,v,!0),t&&t.lastObjectActor===s[0]&&t.lastObjectCtr===s[1]&&(t.numVisible+=1)}else P(k.edits,c,m,I,v,!o[m].action),o[m].action||(o[m].action="update");else o[m].action="insert",M(k.edits,{action:"insert",index:c,elemId:m,opId:I,value:v}),t&&t.lastObjectActor===s[0]&&t.lastObjectCtr===s[1]&&(t.numVisible+=1);else 0!==d||o[m].action||(o[m].action="remove",M(k.edits,{action:"remove",index:c,count:1}),t&&t.lastObjectActor===s[0]&&t.lastObjectCtr===s[1]&&(t.numVisible-=1));else!v&&u||(!y&&k.props[s[4]]||(k.props[s[4]]={}),v&&(k.props[s[4]][I]=v))}function q(e,t,n){const[s,r,o,a,l,c,d,u]=t.nextOp,p=null===s?null:n.actorIds[s],b={objActor:p,objActorNum:s,objCtr:r,keyActor:null===o?null:n.actorIds[o],keyActorNum:o,keyCtr:a,keyStr:l,idActor:n.actorIds[c],idCtr:d,insert:u,objId:null===p?"_root":`${r}@${p}`},{blockIndex:g,skipCount:m,visibleCount:y}=A(n,b),w=n.blocks[g];for(let e of w.columns)e.decoder.reset();const _=0===m||void 0===w.firstVisibleActor||!u&&w.firstVisibleActor===o&&w.firstVisibleCtr===a,I={columns:void 0,bloom:new Uint8Array(w.bloom),numOps:m,lastKey:w.lastKey,numVisible:w.numVisible,lastObjectActor:w.lastObjectActor,lastObjectCtr:w.lastObjectCtr,firstVisibleActor:_?void 0:w.firstVisibleActor,firstVisibleCtr:_?void 0:w.firstVisibleCtr,lastVisibleActor:void 0,lastVisibleCtr:void 0},k=w.columns.map((e=>({columnId:e.columnId,encoder:h(e.columnId)})));U(k,w.columns,m);const{blockIndex:x,docOpsConsumed:j}=function(e,t,n,s,r,o,a){const l=s.nextOp,c=l[7],d=l[0],u=l[1],h=null===d?"_root":`${u}@${r.actorIds[d]}`,f=s.actorIndex,p=r.actorIds[f];let b,g=!1,m=!1,y={};({docOp:b,blockIndex:a}=z(r,a));let w=null===b?0:1,_=null===b?0:b[13],I=null,v=[],k=[],x=[],j=null;for(s.objectIds.add(h);;){if(0===v.length){g=!1;let e=s.nextOp;for(;!s.done&&e[5]===f&&e[7]===c&&e[0]===l[0]&&e[1]===l[1];){const t=v.length>0?v[v.length-1]:null;let n=!1;for(let t=0;t<e[13];t++)for(let s of v)e[14][t]===s[5]&&e[15][t]===s[6]&&(n=!0);if(e===l);else if(c&&null!==t&&null===e[4]&&e[2]===t[5]&&e[3]===t[6]);else if((c||null===t||null===e[4]||e[4]!==t[4]||n)&&(c||null===t||null!==e[4]||null!==t[4]||e[2]!==t[2]||e[3]!==t[3]||n))if(!c&&null===t&&null===e[4]&&b&&b[7]&&null===b[4]&&b[5]===e[2]&&b[6]===e[3]);else if(c||null!==t||null===e[4]||null===j||!(j<e[4]))break;j=null!==e?e[4]:null,v.push(s.nextOp),k.push(s.columns),x.push(new Array(s.nextOp[13])),D(r,s),e=s.nextOp}}v.length>0&&(I=v[0]);const d=b&&b[0]===I[0]&&b[1]===I[1],u=b&&null!==b[4]&&b[4]===I[4],E=b&&null===b[4]&&null===I[4]&&(!b[7]&&b[2]===I[2]&&b[3]===I[3]||b[7]&&b[5]===I[2]&&b[6]===I[3]);if(0===v.length&&(!d||!u&&!E))break;let O=!1,A=0;if(c||!d||null===b[4]&&null!==I[4]||null!==b[4]&&null!==I[4]&&I[4]<b[4]){if(A=v.length,!d&&!g&&null===I[4]&&!I[7])throw new RangeError(`could not find list element with ID: ${I[3]}@${r.actorIds[I[2]]}`)}else if(u||E||g){for(let e=0;e<v.length;e++){const t=v[e];for(let n=0;n<t[13];n++)if(t[14][n]===b[5]&&t[15][n]===b[6]){let s=0;for(;s<b[13]&&(b[15][s]<t[6]||b[15][s]===t[6]&&r.actorIds[b[14][s]]<p);)s++;b[15].splice(s,0,t[6]),b[14].splice(s,0,f),b[13]++,x[e][n]=!0;break}}if(E&&(g=!0),g&&!E)A=v.length;else if(0===v.length||b[6]<I[6]||b[6]===I[6]&&r.actorIds[b[5]]<p){O=!0,F(e,t,h,b,r,y,o,_);for(let e=v.length-1;e>=0;e--){let t=!0;for(let n=0;n<v[e][13];n++)x[e][n]||(t=!1);"del"===i[v[e][8]]&&t&&(v.splice(e,1),k.splice(e,1),x.splice(e,1))}}else{if(b[6]===I[6]&&r.actorIds[b[5]]===p)throw new RangeError(`duplicate operation ID: ${I[6]}@${p}`);A=1}}else O=!0;if(O&&(B(n,r.blocks[a].columns,b),S(t,b,r.actorIds,!1),b[7]&&m&&(m=!1,o++),0===b[13]&&(m=!0),t.numOps++,({docOp:b,blockIndex:a}=z(r,a)),null!==b&&(w++,_=b[13])),A>0){for(let s=0;s<A;s++){let a=v[s];for(let e=0;e<a[13];e++)if(!x[s][e])throw new RangeError(`no matching operation for pred: ${a[15][e]}@${r.actorIds[a[14][e]]}`);B(n,k[s],a),S(t,a,r.actorIds,!0),F(e,t,h,a,r,y,o),a[7]?(m=!1,o++):m=!0}A===v.length?(v.length=0,k.length=0,x.length=0):(v.splice(0,A),k.splice(0,A),x.splice(0,A)),t.numOps+=A}}return b&&(B(n,r.blocks[a].columns,b),t.numOps++,S(t,b,r.actorIds,!1)),{docOpsConsumed:w,blockIndex:a}}(e,I,k,t,n,y,g),E=n.blocks[x];let O=-m-j;for(let e=g;e<=x;e++)O+=n.blocks[e].numOps;U(k,E.columns,O),I.numOps+=O;for(let e of E.columns)if(!e.decoder.done)throw new RangeError(`excess ops in column ${e.columnId}`);if(I.columns=k.map((e=>{const t=f(e.columnId,e.encoder.buffer);return{columnId:e.columnId,decoder:t}})),g===x&&I.numOps<=v)O>0&&void 0!==w.lastVisibleActor&&void 0!==w.lastVisibleCtr&&(I.lastVisibleActor=w.lastVisibleActor,I.lastVisibleCtr=w.lastVisibleCtr),n.blocks[g]=I;else{const e=N(I);n.blocks.splice(g,x-g+1,...e)}}function Z(e,t){if(t[0].columnId!==d[0].columnId||"objActor"!==d[0].columnName||t[1].columnId!==d[1].columnId||"objCtr"!==d[1].columnName||t[2].columnId!==d[2].columnId||"keyActor"!==d[2].columnName||t[3].columnId!==d[3].columnId||"keyCtr"!==d[3].columnName||t[4].columnId!==d[4].columnId||"keyStr"!==d[4].columnName||t[5].columnId!==d[5].columnId||"idActor"!==d[5].columnName||t[6].columnId!==d[6].columnId||"idCtr"!==d[6].columnName||t[7].columnId!==d[7].columnId||"insert"!==d[7].columnName||t[8].columnId!==d[8].columnId||"action"!==d[8].columnName||t[9].columnId!==d[9].columnId||"valLen"!==d[9].columnName||t[10].columnId!==d[10].columnId||"valRaw"!==d[10].columnName||t[13].columnId!==d[13].columnId||"predNum"!==d[13].columnName||t[14].columnId!==d[14].columnId||"predActor"!==d[14].columnName||t[15].columnId!==d[15].columnId||"predCtr"!==d[15].columnName)throw new RangeError("unexpected columnId");const n=e.blocks[0].columns;if(!t.every((e=>x.includes(e.columnId)||n.find((t=>t.columnId===e.columnId))))){let s=n.map((e=>({columnId:e.columnId})));for(let e of t){const{columnId:t}=e;x.includes(t)||n.find((e=>e.columnId===t))||s.push({columnId:t})}s.sort(((e,t)=>e.columnId-t.columnId));for(let t=0;t<e.blocks.length;t++){let n=r(e.blocks[t]);n.columns=p(n.columns.map((e=>({columnId:e.columnId,buffer:e.decoder.buf}))),s),e.blocks[t]=n}}}function G(e,t){if(e.indexOf(t.actorIds[0])<0){if(1!==t.seq)throw new RangeError(`Seq ${t.seq} is the first change for actor ${t.actorIds[0]}`);e=e.concat([t.actorIds[0]])}const n=[];for(let s of t.actorIds){const t=e.indexOf(s);if(t<0)throw new RangeError(`actorId ${s} is not known to document`);n.push(t)}return{actorIds:e,actorTable:n}}function K(e,t,n,s,o){let a=new Set(n.heads),i=new Set,l=r(n.clock),c=[],d=[];for(let e of t){if(void 0!==n.changeIndexByHash[e.hash]||i.has(e.hash))continue;const s=(l[e.actor]||0)+1;let r=!0;for(let t of e.deps){const e=n.changeIndexByHash[t];void 0!==e&&-1!==e||i.has(t)||(r=!1)}if(r){if(e.seq<s){if(o)throw new RangeError(`Reuse of sequence number ${e.seq} for actor ${e.actor}`);return[[],t]}if(e.seq>s)throw new RangeError(`Skipped sequence number ${s} for actor ${e.actor}`);l[e.actor]=e.seq,i.add(e.hash);for(let t of e.deps)a.delete(t);a.add(e.hash),c.push(e)}else d.push(e)}if(c.length>0){let t={changes:c,changeIndex:-1,objectIds:s};for(D(n,t);!t.done;)q(e,t,n);n.heads=[...a].sort(),n.clock=l}return[c,d]}function W(e){for(let t of e.blocks[0].columns)t.decoder.reset();let t={},n=null,s=0,r={_root:{objectId:"_root",type:"map",props:{}}},o=null,a=null,i="_root",l=!1,c=0;for(;({docOp:n,blockIndex:s}=z(e,s)),null!==n;){n[0]===o&&n[1]===a||(i=`${n[1]}@${e.actorIds[n[0]]}`,o=n[0],a=n[1],t={},c=0,l=!1),n[7]&&l&&(l=!1,c++),0===n[13]&&(l=!0),n[6]>e.maxOp&&(e.maxOp=n[6]);for(let t=0;t<n[13];t++)n[15][t]>e.maxOp&&(e.maxOp=n[15][t]);F(r,null,i,n,e,t,c,n[13])}return r._root}function Y(e,t,n,s){B(e,u,[n.indexOf(t.actor),t.seq,t.maxOp,t.time,t.message,t.deps.length,t.deps.map((e=>s[e])),t.extraBytes?t.extraBytes.byteLength<<4|a.BYTES:a.BYTES,t.extraBytes])}class J{constructor(e){if(this.maxOp=0,this.haveHashGraph=!1,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.actorIds=[],this.heads=[],this.clock={},this.queue=[],this.objectMeta={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},e){const t=_(e),{clock:n,headActors:s,encoders:r,numChanges:o}=function(e){const t=p(e.changesColumns,u),n=t[0].decoder,s=t[1].decoder,r=t[5].decoder,o=t[6].decoder;if(t[0].columnId!==u[0].columnId||"actor"!==u[0].columnName||t[1].columnId!==u[1].columnId||"seq"!==u[1].columnName||t[5].columnId!==u[5].columnId||"depsNum"!==u[5].columnName||t[6].columnId!==u[6].columnId||"depsIndex"!==u[6].columnName)throw new RangeError("unexpected columnId");let a=0,i={},l=[],c=new Set;for(;!n.done;){const t=n.readValue(),d=s.readValue(),u=r.readValue(),h=e.actorIds[t];if(1!==d&&d!==i[h]+1)throw new RangeError(`Expected seq ${i[h]+1}, got ${d} for actor ${h}`);l.push(t),i[h]=d,c.add(a);for(let e=0;e<u;e++)c.delete(o.readValue());a++}const d=[...c].map((t=>e.actorIds[l[t]])).sort();for(let e of t)e.decoder.reset();const f=t.map((e=>({columnId:e.columnId,encoder:h(e.columnId)})));return U(f,t,a),{clock:i,headActors:d,encoders:f,numChanges:a}}(t);if(this.binaryDoc=e,this.changes=new Array(o),this.actorIds=t.actorIds,this.heads=t.heads,this.clock=n,this.changesEncoders=r,this.extraBytes=t.extraBytes,1===t.heads.length&&1===s.length&&(this.hashesByActor[s[0]]=[],this.hashesByActor[s[0]][n[s[0]]-1]=t.heads[0]),t.heads.length===t.headsIndexes.length)for(let e=0;e<t.heads.length;e++)this.changeIndexByHash[t.heads[e]]=t.headsIndexes[e];else if(1===t.heads.length)this.changeIndexByHash[t.heads[0]]=o-1;else for(let e of t.heads)this.changeIndexByHash[e]=-1;this.blocks=[{columns:p(t.opsColumns,c)}],V(this.blocks[0]),this.blocks[0].numOps>v&&(this.blocks=N(this.blocks[0]));let a={blocks:this.blocks,actorIds:this.actorIds,objectMeta:this.objectMeta,maxOp:0};this.initPatch=W(a),this.maxOp=a.maxOp}else this.haveHashGraph=!0,this.changesEncoders=u.map((e=>({columnId:e.columnId,encoder:h(e.columnId)}))),this.blocks=[{columns:p([],c),bloom:new Uint8Array(k),numOps:0,lastKey:void 0,numVisible:void 0,lastObjectActor:void 0,lastObjectCtr:void 0,firstVisibleActor:void 0,firstVisibleCtr:void 0,lastVisibleActor:void 0,lastVisibleCtr:void 0}]}clone(){let e=new J;return e.maxOp=this.maxOp,e.haveHashGraph=this.haveHashGraph,e.changes=this.changes.slice(),e.changeIndexByHash=r(this.changeIndexByHash),e.dependenciesByHash=r(this.dependenciesByHash),e.dependentsByHash=Object.entries(this.dependentsByHash).reduce(((e,[t,n])=>(e[t]=n.slice(),e)),{}),e.hashesByActor=Object.entries(this.hashesByActor).reduce(((e,[t,n])=>(e[t]=n.slice(),e)),{}),e.actorIds=this.actorIds,e.heads=this.heads,e.clock=this.clock,e.blocks=this.blocks,e.objectMeta=this.objectMeta,e.queue=this.queue,e}applyChanges(e,t=!1){let n=e.map((e=>{const t=m(e);return t.buffer=e,t})),r={_root:{objectId:"_root",type:"map",props:{}}},o={maxOp:this.maxOp,changeIndexByHash:this.changeIndexByHash,actorIds:this.actorIds,heads:this.heads,clock:this.clock,blocks:this.blocks.slice(),objectMeta:Object.assign({},this.objectMeta)},a=0===this.queue.length?n:n.concat(this.queue),i=[],l=new Set;for(;;){const[e,t]=K(r,a,o,l,this.haveHashGraph);a=t;for(let t=0;t<e.length;t++)o.changeIndexByHash[e[t].hash]=this.changes.length+i.length+t;if(e.length>0&&(i=i.concat(e)),0===a.length)break;if(0===e.length){if(this.haveHashGraph)break;this.computeHashGraph(),o.changeIndexByHash=this.changeIndexByHash}}!function(e,t,n){for(let r of t){let t=n.objectMeta[r],o=null,a=!1;for(;;){const i=o&&Object.keys(t.children[o.parentKey]).length>0;if(e[r]||(e[r]=H(r,t.type)),o&&i)if("list"===t.type||"text"===t.type){for(let n of e[r].edits)n.opId&&t.children[o.parentKey][n.opId]&&(a=!0);if(!a){const a=s(r),i=s(o.parentKey),l={objActor:a.actorId,objCtr:a.counter,keyActor:i.actorId,keyCtr:i.counter,objActorNum:n.actorIds.indexOf(a.actorId),keyActorNum:n.actorIds.indexOf(i.actorId),keyStr:null,insert:!1,objId:r},{visibleCount:c}=A(n,l);for(let[n,s]of Object.entries(t.children[o.parentKey])){let t=s;s.objectId&&(e[s.objectId]||(e[s.objectId]=H(s.objectId,s.type)),t=e[s.objectId]);const o={action:"update",index:c,opId:n,value:t};M(e[r].edits,o)}}}else{e[r].props[o.parentKey]||(e[r].props[o.parentKey]={});let n=e[r].props[o.parentKey];for(let[s,r]of Object.entries(t.children[o.parentKey]))n[s]?a=!0:r.objectId?(e[r.objectId]||(e[r.objectId]=H(r.objectId,r.type)),n[s]=e[r.objectId]):n[s]=r}if(a||!t.parentObj||o&&!i)break;o=t,r=t.parentObj,t=n.objectMeta[r]}}}(r,l,o);for(let e of i){this.changes.push(e.buffer),this.hashesByActor[e.actor]||(this.hashesByActor[e.actor]=[]),this.hashesByActor[e.actor][e.seq-1]=e.hash,this.changeIndexByHash[e.hash]=this.changes.length-1,this.dependenciesByHash[e.hash]=e.deps,this.dependentsByHash[e.hash]=[];for(let t of e.deps)this.dependentsByHash[t]||(this.dependentsByHash[t]=[]),this.dependentsByHash[t].push(e.hash);Y(this.changesEncoders,e,o.actorIds,this.changeIndexByHash)}this.maxOp=o.maxOp,this.actorIds=o.actorIds,this.heads=o.heads,this.clock=o.clock,this.blocks=o.blocks,this.objectMeta=o.objectMeta,this.queue=a,this.binaryDoc=null,this.initPatch=null;let c={maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:r._root};return t&&1===n.length&&(c.actor=n[0].actor,c.seq=n[0].seq),c}computeHashGraph(){const e=this.save();this.haveHashGraph=!0,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.clock={};for(let t of w([e])){const e=g(t);this.changes.push(e),this.changeIndexByHash[t.hash]=this.changes.length-1,this.dependenciesByHash[t.hash]=t.deps,this.dependentsByHash[t.hash]=[];for(let e of t.deps)this.dependentsByHash[e].push(t.hash);1===t.seq&&(this.hashesByActor[t.actor]=[]),this.hashesByActor[t.actor].push(t.hash);const n=(this.clock[t.actor]||0)+1;if(t.seq!==n)throw new RangeError(`Expected seq ${n}, got seq ${t.seq} from actor ${t.actor}`);this.clock[t.actor]=t.seq}}getChanges(e){if(this.haveHashGraph||this.computeHashGraph(),0===e.length)return this.changes.slice();let t=[],n={},s=[];for(let s of e){n[s]=!0;const e=this.dependentsByHash[s];if(!e)throw new RangeError(`hash not found: ${s}`);t.push(...e)}for(;t.length>0;){const e=t.pop();if(n[e]=!0,s.push(e),!this.dependenciesByHash[e].every((e=>n[e])))break;t.push(...this.dependentsByHash[e])}if(0===t.length&&this.heads.every((e=>n[e])))return s.map((e=>this.changes[this.changeIndexByHash[e]]));for(t=e.slice(),n={};t.length>0;){const e=t.pop();if(!n[e]){const s=this.dependenciesByHash[e];if(!s)throw new RangeError(`hash not found: ${e}`);t.push(...s),n[e]=!0}}return this.changes.filter((e=>!n[y(e,!0).hash]))}getChangesAdded(e){this.haveHashGraph||this.computeHashGraph();let t=this.heads.slice(),n={},s=[];for(;t.length>0;){const r=t.pop();n[r]||void 0!==e.changeIndexByHash[r]||(n[r]=!0,s.push(r),t.push(...this.dependenciesByHash[r]))}return s.reverse().map((e=>this.changes[this.changeIndexByHash[e]]))}getChangeByHash(e){return this.haveHashGraph||this.computeHashGraph(),this.changes[this.changeIndexByHash[e]]}getMissingDeps(e=[]){this.haveHashGraph||this.computeHashGraph();let t=new Set(e),n=new Set;for(let e of this.queue){n.add(e.hash);for(let n of e.deps)t.add(n)}let s=[];for(let e of t)void 0!==this.changeIndexByHash[e]||n.has(e)||s.push(e);return s.sort()}save(){if(this.binaryDoc)return this.binaryDoc;const e=this.changesEncoders.map((e=>({columnId:e.columnId,encoder:h(e.columnId)})));return U(e,this.changesEncoders.map((e=>{const t=f(e.columnId,e.encoder.buffer);return{columnId:e.columnId,decoder:t}})),this.changes.length),this.binaryDoc=I({changesColumns:this.changesEncoders,opsColumns:T(this.blocks),actorIds:this.actorIds,heads:this.heads,headsIndexes:this.heads.map((e=>this.changeIndexByHash[e])),extraBytes:this.extraBytes}),this.changesEncoders=e,this.binaryDoc}getPatch(){const e={blocks:this.blocks,actorIds:this.actorIds,objectMeta:{_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},maxOp:0},t=this.initPatch?this.initPatch:W(e);return{maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:t}}}e.exports={MAX_BLOCK_SIZE:v,BackendDoc:J,bloomFilterContains:C}},"./backend/sync.js":
/*!*************************!*\
  !*** ./backend/sync.js ***!
  \*************************/function(e,t,n){const s=n(/*! ./backend */"./backend/backend.js"),{hexStringToBytes:r,bytesToHexString:o,Encoder:a,Decoder:i}=n(/*! ./encoding */"./backend/encoding.js"),{decodeChangeMeta:l}=n(/*! ./columnar */"./backend/columnar.js"),{copyObject:c}=n(/*! ../src/common */"./src/common.js");class d{constructor(e){if(Array.isArray(e)){this.numEntries=e.length,this.numBitsPerEntry=10,this.numProbes=7,this.bits=new Uint8Array(Math.ceil(this.numEntries*this.numBitsPerEntry/8));for(let t of e)this.addHash(t)}else{if(!(e instanceof Uint8Array))throw new TypeError("invalid argument");if(0===e.byteLength)this.numEntries=0,this.numBitsPerEntry=0,this.numProbes=0,this.bits=e;else{const t=new i(e);this.numEntries=t.readUint32(),this.numBitsPerEntry=t.readUint32(),this.numProbes=t.readUint32(),this.bits=t.readRawBytes(Math.ceil(this.numEntries*this.numBitsPerEntry/8))}}}get bytes(){if(0===this.numEntries)return new Uint8Array(0);const e=new a;return e.appendUint32(this.numEntries),e.appendUint32(this.numBitsPerEntry),e.appendUint32(this.numProbes),e.appendRawBytes(this.bits),e.buffer}getProbes(e){const t=r(e),n=8*this.bits.byteLength;if(32!==t.byteLength)throw new RangeError(`Not a 256-bit hash: ${e}`);let s=((t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0)%n,o=((t[4]|t[5]<<8|t[6]<<16|t[7]<<24)>>>0)%n,a=((t[8]|t[9]<<8|t[10]<<16|t[11]<<24)>>>0)%n;const i=[s];for(let e=1;e<this.numProbes;e++)s=(s+o)%n,o=(o+a)%n,i.push(s);return i}addHash(e){for(let t of this.getProbes(e))this.bits[t>>>3]|=1<<(7&t)}containsHash(e){if(0===this.numEntries)return!1;for(let t of this.getProbes(e))if(0==(this.bits[t>>>3]&1<<(7&t)))return!1;return!0}}function u(e,t){if(!Array.isArray(t))throw new TypeError("hashes must be an array");e.appendUint32(t.length);for(let n=0;n<t.length;n++){if(n>0&&t[n-1]>=t[n])throw new RangeError("hashes must be sorted");const s=r(t[n]);if(32!==s.byteLength)throw new TypeError("heads hashes must be 256 bits");e.appendRawBytes(s)}}function h(e){let t=e.readUint32(),n=[];for(let s=0;s<t;s++)n.push(o(e.readRawBytes(32)));return n}function f(e){const t=new a;t.appendByte(66),u(t,e.heads),u(t,e.need),t.appendUint32(e.have.length);for(let n of e.have)u(t,n.lastSync),t.appendPrefixedBytes(n.bloom);t.appendUint32(e.changes.length);for(let n of e.changes)t.appendPrefixedBytes(n);return t.buffer}function p(e){const t=new i(e),n=t.readByte();if(66!==n)throw new RangeError(`Unexpected message type: ${n}`);const s=h(t),r=h(t),o=t.readUint32();let a={heads:s,need:r,have:[],changes:[]};for(let e=0;e<o;e++){const e=h(t),n=t.readPrefixedBytes(t);a.have.push({lastSync:e,bloom:n})}const l=t.readUint32();for(let e=0;e<l;e++){const e=t.readPrefixedBytes();a.changes.push(e)}return a}function b(e,t){const n=s.getChanges(e,t).map((e=>l(e,!0).hash));return{lastSync:t,bloom:new d(n).bytes}}function g(){return{sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}}}function m(e,t){return e.length===t.length&&e.every(((e,n)=>e===t[n]))}e.exports={receiveSyncMessage:function(e,t,n){if(!e)throw new Error("generateSyncMessage called with no Automerge document");if(!t)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:r,lastSentHeads:o,sentHashes:a}=t,i=null;const l=p(n),c=s.getHeads(e);l.changes.length>0&&([e,i]=s.applyChanges(e,l.changes),r=function(e,t,n){const s=t.filter((t=>!e.includes(t))),r=n.filter((e=>t.includes(e)));return[...new Set([...s,...r])].sort()}(c,s.getHeads(e),r)),0===l.changes.length&&m(l.heads,c)&&(o=l.heads);const d=l.heads.filter((t=>s.getChangeByHash(e,t)));d.length===l.heads.length?(r=l.heads,0===l.heads.length&&(o=[],a=[])):r=[...new Set(d.concat(r))].sort();const u={sharedHeads:r,lastSentHeads:o,theirHave:l.have,theirHeads:l.heads,theirNeed:l.need,sentHashes:a};return[e,u,i]},generateSyncMessage:function(e,t){if(!e)throw new Error("generateSyncMessage called with no Automerge document");if(!t)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:n,lastSentHeads:r,theirHeads:o,theirNeed:a,theirHave:i,sentHashes:u}=t;const h=s.getHeads(e),p=s.getMissingDeps(e,o||[]);let g=[];if(o&&!p.every((e=>o.includes(e)))||(g=[b(e,n)]),i&&i.length>0&&!i[0].lastSync.every((t=>s.getChangeByHash(e,t))))return[t,f({heads:h,need:[],have:[{lastSync:[],bloom:new Uint8Array(0)}],changes:[]})];let y=Array.isArray(i)&&Array.isArray(a)?function(e,t,n){if(0===t.length)return n.map((t=>s.getChangeByHash(e,t))).filter((e=>void 0!==e));let r={},o=[];for(let e of t){for(let t of e.lastSync)r[t]=!0;o.push(new d(e.bloom))}const a=s.getChanges(e,Object.keys(r)).map((e=>l(e,!0)));let i={},c={},u={};for(let e of a){i[e.hash]=!0;for(let t of e.deps)c[t]||(c[t]=[]),c[t].push(e.hash);o.every((t=>!t.containsHash(e.hash)))&&(u[e.hash]=!0)}let h=Object.keys(u);for(;h.length>0;){const e=h.pop();if(c[e])for(let t of c[e])u[t]||(u[t]=!0,h.push(t))}let f=[];for(let t of n)if(u[t]=!0,!i[t]){const n=s.getChangeByHash(e,t);n&&f.push(n)}for(let e of a)u[e.hash]&&f.push(e.change);return f}(e,i,a):[];const w=Array.isArray(r)&&m(h,r),_=Array.isArray(o)&&m(h,o);if(w&&_&&0===y.length)return[t,null];y=y.filter((e=>!u[l(e,!0).hash]));const I={heads:h,have:g,need:p,changes:y};if(y.length>0){u=c(u);for(const e of y)u[l(e,!0).hash]=!0}return[t=Object.assign({},t,{lastSentHeads:h,sentHashes:u}),f(I)]},encodeSyncMessage:f,decodeSyncMessage:p,initSyncState:g,encodeSyncState:function(e){const t=new a;return t.appendByte(67),u(t,e.sharedHeads),t.buffer},decodeSyncState:function(e){const t=new i(e),n=t.readByte();if(67!==n)throw new RangeError(`Unexpected record type: ${n}`);const s=h(t);return Object.assign({sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}},{sharedHeads:s})},BloomFilter:d}},"./backend/util.js":
/*!*************************!*\
  !*** ./backend/util.js ***!
  \*************************/function(e){e.exports={backendState:function(e){if(e.frozen)throw new Error("Attempting to use an outdated Automerge document that has already been updated. Please use the latest document state, or call Automerge.clone() if you really need to use this old document state.");return e.state}}},"./frontend/apply_patch.js":
/*!*********************************!*\
  !*** ./frontend/apply_patch.js ***!
  \*********************************/function(e,t,n){const{isObject:s,copyObject:r,parseOpId:o}=n(/*! ../src/common */"./src/common.js"),{OBJECT_ID:a,CONFLICTS:i,ELEM_IDS:l}=n(/*! ./constants */"./frontend/constants.js"),{instantiateText:c}=n(/*! ./text */"./frontend/text.js"),{instantiateTable:d}=n(/*! ./table */"./frontend/table.js"),{Counter:u}=n(/*! ./counter */"./frontend/counter.js");function h(e,t,n){return e.objectId?(t&&t[a]!==e.objectId&&(t=void 0),m(e,t,n)):"timestamp"===e.datatype?new Date(e.value):"counter"===e.datatype?new u(e.value):e.value}function f(e,t){const n=/^(\d+)@(.*)$/,s=n.test(e)?o(e):{counter:0,actorId:e},r=n.test(t)?o(t):{counter:0,actorId:t};return s.counter<r.counter?-1:s.counter>r.counter?1:s.actorId<r.actorId?-1:s.actorId>r.actorId?1:0}function p(e,t){const n=r(e),s=r(e?e[i]:void 0);return Object.defineProperty(n,a,{value:t}),Object.defineProperty(n,i,{value:s}),n}function b(e,t,n){const s=e.objectId;n[s]||(n[s]=p(t,s));const r=n[s];return function(e,t,n,s){if(e)for(let r of Object.keys(e)){const o={},a=Object.keys(e[r]).sort(f).reverse();for(let t of a){const a=e[r][t];n[r]&&n[r][t]?o[t]=h(a,n[r][t],s):o[t]=h(a,void 0,s)}0===a.length?(delete t[r],delete n[r]):(t[r]=o[a[0]],n[r]=o)}}(e.props,r,r[i],n),r}function g(e,t,n){const s=e.objectId;n[s]||(n[s]=function(e,t){const n=e?e.slice():[],s=e&&e[i]?e[i].slice():[],r=e&&e[l]?e[l].slice():[];return Object.defineProperty(n,a,{value:t}),Object.defineProperty(n,i,{value:s}),Object.defineProperty(n,l,{value:r}),n}(t,s));const r=n[s],c=r[i],d=r[l];for(let t=0;t<e.edits.length;t++){const s=e.edits[t];if("insert"===s.action||"update"===s.action){const o=c[s.index]&&c[s.index][s.opId];let a=h(s.value,o,n),i={[s.opId]:a};for(;t<e.edits.length-1&&e.edits[t+1].index===s.index&&"update"===e.edits[t+1].action;){t++;const s=e.edits[t],r=c[s.index]&&c[s.index][s.opId];a=h(s.value,r,n),i[s.opId]=a}"insert"===s.action?(r.splice(s.index,0,a),c.splice(s.index,0,i),d.splice(s.index,0,s.elemId)):(r[s.index]=a,c[s.index]=i)}else if("multi-insert"===s.action){const e=o(s.elemId),t=[],a=[],i=[],l=s.datatype;s.values.forEach(((s,r)=>{const o=`${e.counter+r}@${e.actorId}`;s=h({value:s,datatype:l},void 0,n),a.push(s),i.push({[o]:{value:s,datatype:l,type:"value"}}),t.push(o)})),r.splice(s.index,0,...a),c.splice(s.index,0,...i),d.splice(s.index,0,...t)}else"remove"===s.action&&(r.splice(s.index,s.count),c.splice(s.index,s.count),d.splice(s.index,s.count))}return r}function m(e,t,n){if(s(t)&&(!e.props||0===Object.keys(e.props).length)&&(!e.edits||0===e.edits.length)&&!n[e.objectId])return t;if("map"===e.type)return b(e,t,n);if("table"===e.type)return function(e,t,n){const s=e.objectId;n[s]||(n[s]=t?t._clone():d(s));const r=n[s];for(let t of Object.keys(e.props||{})){const s=Object.keys(e.props[t]);if(0===s.length)r.remove(t);else{if(1!==s.length)throw new RangeError("Conflicts are not supported on properties of a table");{const o=e.props[t][s[0]];r._set(t,h(o,r.byId(t),n),s[0])}}}return r}(e,t,n);if("list"===e.type)return g(e,t,n);if("text"===e.type)return function(e,t,n){const s=e.objectId;let r;r=n[s]?n[s].elems:t?t.elems.slice():[];for(const t of e.edits)if("insert"===t.action){const e=h(t.value,void 0,n),s={elemId:t.elemId,pred:[t.opId],value:e};r.splice(t.index,0,s)}else if("multi-insert"===t.action){const e=o(t.elemId),s=t.datatype,a=t.values.map(((t,r)=>{t=h({datatype:s,value:t},void 0,n);const o=`${e.counter+r}@${e.actorId}`;return{elemId:o,pred:[o],value:t}}));r.splice(t.index,0,...a)}else if("update"===t.action){const e=r[t.index].elemId,s=h(t.value,r[t.index].value,n);r[t.index]={elemId:e,pred:[t.opId],value:s}}else"remove"===t.action&&r.splice(t.index,t.count);return n[s]=c(s,r),n[s]}(e,t,n);throw new TypeError(`Unknown object type: ${e.type}`)}e.exports={interpretPatch:m,cloneRootObject:function(e){if("_root"!==e[a])throw new RangeError(`Not the root object: ${e[a]}`);return p(e,"_root")}}},"./frontend/constants.js":
/*!*******************************!*\
  !*** ./frontend/constants.js ***!
  \*******************************/function(e){const t=Symbol("_options"),n=Symbol("_cache"),s=Symbol("_state"),r=Symbol("_objectId"),o=Symbol("_conflicts"),a=Symbol("_change"),i=Symbol("_elemIds");e.exports={OPTIONS:t,CACHE:n,STATE:s,OBJECT_ID:r,CONFLICTS:o,CHANGE:a,ELEM_IDS:i}},"./frontend/context.js":
/*!*****************************!*\
  !*** ./frontend/context.js ***!
  \*****************************/function(e,t,n){const{CACHE:s,OBJECT_ID:r,CONFLICTS:o,ELEM_IDS:a,STATE:i}=n(/*! ./constants */"./frontend/constants.js"),{interpretPatch:l}=n(/*! ./apply_patch */"./frontend/apply_patch.js"),{Text:c}=n(/*! ./text */"./frontend/text.js"),{Table:d}=n(/*! ./table */"./frontend/table.js"),{Counter:u,getWriteableCounter:h}=n(/*! ./counter */"./frontend/counter.js"),{Int:f,Uint:p,Float64:b}=n(/*! ./numbers */"./frontend/numbers.js"),{isObject:g,parseOpId:m,createArrayOfNulls:y}=n(/*! ../src/common */"./src/common.js"),w=n(/*! ../src/uuid */"./src/uuid.js");function _(e,t){return e instanceof d?[e.opIds[t]]:e instanceof c?e.elems[t].pred:e[o]&&e[o][t]?Object.keys(e[o][t]):[]}function I(e,t,n=!1){if(n){if(0===t)return"_head";t-=1}if(e[a])return e[a][t];if(e.getElemId)return e.getElemId(t);throw new RangeError(`Cannot find elemId at list index ${t}`)}e.exports={Context:class{constructor(e,t,n){this.actorId=t,this.nextOpNum=e[i].maxOp+1,this.cache=e[s],this.updated={},this.ops=[],this.applyPatch=n||l}addOp(e){this.ops.push(e),"set"===e.action&&e.values?this.nextOpNum+=e.values.length:"del"===e.action&&e.multiOp?this.nextOpNum+=e.multiOp:this.nextOpNum+=1}nextOpId(){return`${this.nextOpNum}@${this.actorId}`}getValueDescription(e){if(!["object","boolean","number","string"].includes(typeof e))throw new TypeError("Unsupported type of value: "+typeof e);if(g(e)){if(e instanceof Date)return{type:"value",value:e.getTime(),datatype:"timestamp"};if(e instanceof f)return{type:"value",value:e.value,datatype:"int"};if(e instanceof p)return{type:"value",value:e.value,datatype:"uint"};if(e instanceof b)return{type:"value",value:e.value,datatype:"float64"};if(e instanceof u)return{type:"value",value:e.value,datatype:"counter"};{const t=e[r],n=this.getObjectType(t);if(!t)throw new RangeError(`Object ${JSON.stringify(e)} has no objectId`);return"list"===n||"text"===n?{objectId:t,type:n,edits:[]}:{objectId:t,type:n,props:{}}}}return"number"==typeof e?Number.isInteger(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER?{type:"value",value:e,datatype:"int"}:{type:"value",value:e,datatype:"float64"}:{type:"value",value:e}}getValuesDescriptions(e,t,n){if(t instanceof d){const e=t.byId(n),s=t.opIds[n];return e?{[s]:this.getValueDescription(e)}:{}}if(t instanceof c){const e=t.get(n),s=t.getElemId(n);return e?{[s]:this.getValueDescription(e)}:{}}{const s=t[o][n],r={};if(!s)throw new RangeError(`No children at key ${n} of path ${JSON.stringify(e)}`);for(let e of Object.keys(s))r[e]=this.getValueDescription(s[e]);return r}}getPropertyValue(e,t,n){return e instanceof d?e.byId(t):e instanceof c?e.get(t):e[o][t][n]}getSubpatch(e,t){if(0==t.length)return e;let n=e,s=this.getObject("_root");for(let e of t){let r=this.getValuesDescriptions(t,s,e.key);if(n.props)n.props[e.key]||(n.props[e.key]=r);else if(n.edits)for(const t of Object.keys(r))n.edits.push({action:"update",index:e.key,opId:t,value:r[t]});let o=null;for(let t of Object.keys(r))r[t].objectId===e.objectId&&(o=t);if(!o)throw new RangeError(`Cannot find path object with objectId ${e.objectId}`);n=r[o],s=this.getPropertyValue(s,e.key,o)}return n}getObject(e){const t=this.updated[e]||this.cache[e];if(!t)throw new RangeError(`Target object does not exist: ${e}`);return t}getObjectType(e){if("_root"===e)return"map";const t=this.getObject(e);return t instanceof c?"text":t instanceof d?"table":Array.isArray(t)?"list":"map"}getObjectField(e,t,n){if(!["string","number"].includes(typeof n))return;const s=this.getObject(t);if(s[n]instanceof u)return h(s[n].value,this,e,t,n);if(g(s[n])){const t=s[n][r],o=e.concat([{key:n,objectId:t}]);return this.instantiateObject(o,t)}return s[n]}createNestedObjects(e,t,n,s,o,a){if(n[r])throw new RangeError("Cannot create a reference to an existing document object");const i=this.nextOpId();if(n instanceof c){this.addOp(a?{action:"makeText",obj:e,elemId:a,insert:s,pred:o}:{action:"makeText",obj:e,key:t,insert:s,pred:o});const r={objectId:i,type:"text",edits:[]};return this.insertListItems(r,0,[...n],!0),r}if(n instanceof d){if(n.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");return this.addOp(a?{action:"makeTable",obj:e,elemId:a,insert:s,pred:o}:{action:"makeTable",obj:e,key:t,insert:s,pred:o}),{objectId:i,type:"table",props:{}}}if(Array.isArray(n)){this.addOp(a?{action:"makeList",obj:e,elemId:a,insert:s,pred:o}:{action:"makeList",obj:e,key:t,insert:s,pred:o});const r={objectId:i,type:"list",edits:[]};return this.insertListItems(r,0,n,!0),r}{this.addOp(a?{action:"makeMap",obj:e,elemId:a,insert:s,pred:o}:{action:"makeMap",obj:e,key:t,insert:s,pred:o});let r={};for(let e of Object.keys(n).sort()){const t=this.nextOpId(),s=this.setValue(i,e,n[e],!1,[]);r[e]={[t]:s}}return{objectId:i,type:"map",props:r}}}setValue(e,t,n,s,r,o){if(!e)throw new RangeError("setValue needs an objectId");if(""===t)throw new RangeError("The key of a map entry must not be an empty string");if(!g(n)||n instanceof Date||n instanceof u||n instanceof f||n instanceof p||n instanceof b){const a=this.getValueDescription(n),i={action:"set",obj:e,insert:s,value:a.value,pred:r};return o?i.elemId=o:i.key=t,a.datatype&&(i.datatype=a.datatype),this.addOp(i),a}return this.createNestedObjects(e,t,n,s,r,o)}applyAtPath(e,t){let n={objectId:"_root",type:"map",props:{}};t(this.getSubpatch(n,e)),this.applyPatch(n,this.cache._root,this.updated)}setMapKey(e,t,n){if("string"!=typeof t)throw new RangeError("The key of a map entry must be a string, not "+typeof t);const s=0===e.length?"_root":e[e.length-1].objectId,r=this.getObject(s);if(r[t]instanceof u)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(r[t]!==n||Object.keys(r[o][t]||{}).length>1||void 0===n)&&this.applyAtPath(e,(e=>{const o=_(r,t),a=this.nextOpId(),i=this.setValue(s,t,n,!1,o);e.props[t]={[a]:i}}))}deleteMapKey(e,t){const n=0===e.length?"_root":e[e.length-1].objectId,s=this.getObject(n);if(void 0!==s[t]){const r=_(s,t);this.addOp({action:"del",obj:n,key:t,insert:!1,pred:r}),this.applyAtPath(e,(e=>{e.props[t]={}}))}}insertListItems(e,t,n,s){const r=s?[]:this.getObject(e.objectId);if(t<0||t>r.length)throw new RangeError(`List index ${t} is out of bounds for list of length ${r.length}`);if(0===n.length)return;let o=I(r,t,!0);const a=n.every((e=>"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e||g(e)&&(e instanceof Date||e instanceof u||e instanceof f||e instanceof p||e instanceof b))),i=a?n.map((e=>this.getValueDescription(e))):[],l=i.every((e=>e.datatype===i[0].datatype));if(a&&l&&n.length>1){const n=this.nextOpId(),s=i[0].datatype,r=i.map((e=>e.value)),a={action:"set",obj:e.objectId,elemId:o,insert:!0,values:r,pred:[]},l={action:"multi-insert",elemId:n,index:t,values:r};s&&(a.datatype=s,l.datatype=s),this.addOp(a),e.edits.push(l)}else for(let s=0;s<n.length;s++){let r=this.nextOpId();const a=this.setValue(e.objectId,t+s,n[s],!0,[],o);o=r,e.edits.push({action:"insert",index:t+s,elemId:o,opId:o,value:a})}}setListIndex(e,t,n){const s=0===e.length?"_root":e[e.length-1].objectId,r=this.getObject(s);if(t>=r.length){const s=y(t-r.length);return s.push(n),this.splice(e,r.length,0,s)}if(r[t]instanceof u)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(r[t]!==n||Object.keys(r[o][t]||{}).length>1||void 0===n)&&this.applyAtPath(e,(e=>{const o=_(r,t),a=this.nextOpId(),i=this.setValue(s,t,n,!1,o,I(r,t));e.edits.push({action:"update",index:t,opId:a,value:i})}))}splice(e,t,n,s){const r=0===e.length?"_root":e[e.length-1].objectId;let o=this.getObject(r);if(t<0||n<0||t>o.length-n)throw new RangeError(`${n} deletions starting at index ${t} are out of bounds for list of length ${o.length}`);if(0===n&&0===s.length)return;let a={objectId:"_root",type:"map",props:{}},i=this.getSubpatch(a,e);if(n>0){let s,a,l;for(let i=0;i<n;i++){if(this.getObjectField(e,r,t+i)instanceof u)throw new TypeError("Unsupported operation: deleting a counter from a list");const n=I(o,t+i),c=m(n),d=_(o,t+i),h=1===d.length?m(d[0]):void 0;s&&a&&l&&h&&a.actorId===c.actorId&&a.counter+1===c.counter&&l.actorId===h.actorId&&l.counter+1===h.counter?s.multiOp=(s.multiOp||1)+1:(s&&this.addOp(s),s={action:"del",obj:r,elemId:n,insert:!1,pred:d}),a=c,l=h}this.addOp(s),i.edits.push({action:"remove",index:t,count:n})}s.length>0&&this.insertListItems(i,t,s,!1),this.applyPatch(a,this.cache._root,this.updated)}addTableRow(e,t){if(!g(t)||Array.isArray(t))throw new TypeError("A table row must be an object");if(t[r])throw new TypeError("Cannot reuse an existing object as table row");if(t.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');const n=w(),s=this.setValue(e[e.length-1].objectId,n,t,!1,[]);return this.applyAtPath(e,(e=>{e.props[n]={[s.objectId]:s}})),n}deleteTableRow(e,t,n){const s=e[e.length-1].objectId;this.getObject(s).byId(t)&&(this.addOp({action:"del",obj:s,key:t,insert:!1,pred:[n]}),this.applyAtPath(e,(e=>{e.props[t]={}})))}increment(e,t,n){const s=0===e.length?"_root":e[e.length-1].objectId,r=this.getObject(s);if(!(r[t]instanceof u))throw new TypeError("Only counter values can be incremented");const o=this.getObjectType(s),a=r[t].value+n,i=this.nextOpId(),l=_(r,t);if("list"===o||"text"===o){const e=I(r,t,!1);this.addOp({action:"inc",obj:s,elemId:e,value:n,insert:!1,pred:l})}else this.addOp({action:"inc",obj:s,key:t,value:n,insert:!1,pred:l});this.applyAtPath(e,(e=>{"list"===o||"text"===o?e.edits.push({action:"update",index:t,opId:i,value:{value:a,datatype:"counter"}}):e.props[t]={[i]:{value:a,datatype:"counter"}}}))}}}},"./frontend/counter.js":
/*!*****************************!*\
  !*** ./frontend/counter.js ***!
  \*****************************/function(e){class t{constructor(e){this.value=e||0,Object.freeze(this)}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}}class n extends t{increment(e){return e="number"==typeof e?e:1,this.context.increment(this.path,this.key,e),this.value+=e,this.value}decrement(e){return this.increment("number"==typeof e?-e:-1)}}e.exports={Counter:t,getWriteableCounter:function(e,t,s,r,o){const a=Object.create(n.prototype);return a.value=e,a.context=t,a.path=s,a.objectId=r,a.key=o,a}}},"./frontend/index.js":
/*!***************************!*\
  !*** ./frontend/index.js ***!
  \***************************/function(e,t,n){const{OPTIONS:s,CACHE:r,STATE:o,OBJECT_ID:a,CONFLICTS:i,CHANGE:l,ELEM_IDS:c}=n(/*! ./constants */"./frontend/constants.js"),{isObject:d,copyObject:u}=n(/*! ../src/common */"./src/common.js"),h=n(/*! ../src/uuid */"./src/uuid.js"),{interpretPatch:f,cloneRootObject:p}=n(/*! ./apply_patch */"./frontend/apply_patch.js"),{rootObjectProxy:b}=n(/*! ./proxies */"./frontend/proxies.js"),{Context:g}=n(/*! ./context */"./frontend/context.js"),{Text:m}=n(/*! ./text */"./frontend/text.js"),{Table:y}=n(/*! ./table */"./frontend/table.js"),{Counter:w}=n(/*! ./counter */"./frontend/counter.js"),{Float64:_,Int:I,Uint:v}=n(/*! ./numbers */"./frontend/numbers.js"),{Observable:k}=n(/*! ./observable */"./frontend/observable.js");function x(e){if("string"!=typeof e)throw new TypeError("Unsupported type of actorId: "+typeof e);if(!/^[0-9a-f]+$/.test(e))throw new RangeError("actorId must consist only of lowercase hex digits");if(e.length%2!=0)throw new RangeError("actorId must consist of an even number of digits")}function j(e,t,n){let a=t._root;if(a||(a=p(e[r]._root),t._root=a),Object.defineProperty(a,s,{value:e[s]}),Object.defineProperty(a,r,{value:t}),Object.defineProperty(a,o,{value:n}),e[s].freeze)for(let e of Object.keys(t))t[e]instanceof y?t[e]._freeze():t[e]instanceof m?(Object.freeze(t[e].elems),Object.freeze(t[e])):(Object.freeze(t[e]),Object.freeze(t[e][i]));for(let n of Object.keys(e[r]))t[n]||(t[n]=e[r][n]);return e[s].freeze&&Object.freeze(t),a}function E(e,t,n){const r=C(e);if(!r)throw new Error("Actor ID must be initialized with setActorId() before making a change");const a=u(e[o]);a.seq+=1;const i={actor:r,seq:a.seq,startOp:a.maxOp+1,deps:a.deps,time:n&&"number"==typeof n.time?n.time:Math.round((new Date).getTime()/1e3),message:n&&"string"==typeof n.message?n.message:"",ops:t.ops};if(e[s].backend){const[t,r,o]=e[s].backend.applyLocalChange(a.backendState,i);a.backendState=t,a.lastLocalChange=o;const l=O(e,r,a,!0),c=n&&n.patchCallback||e[s].patchCallback;return c&&c(r,e,l,!0,[o]),[l,i]}{const n={actor:r,seq:i.seq,before:e};return a.requests=a.requests.concat([n]),a.maxOp=a.maxOp+function(e){let t=0;for(const n of e)"set"===n.action&&n.values?t+=n.values.length:t+=1;return t}(i.ops),a.deps=[],[j(e,t?t.updated:{},a),i]}}function O(e,t,n,s){const r=C(e),o={};if(f(t.diffs,e,o),s){if(!t.clock)throw new RangeError("patch is missing clock field");t.clock[r]&&t.clock[r]>n.seq&&(n.seq=t.clock[r]),n.clock=t.clock,n.deps=t.deps,n.maxOp=Math.max(n.maxOp,t.maxOp)}return j(e,o,n)}function A(e){if("string"==typeof e)e={actorId:e};else if(void 0===e)e={};else if(!d(e))throw new TypeError(`Unsupported value for init() options: ${e}`);if(e.deferActorId||(void 0===e.actorId&&(e.actorId=h()),x(e.actorId)),e.observable){const t=e.patchCallback,n=e.observable;e.patchCallback=(e,s,r,o,a)=>{t&&t(e,s,r,o,a),n.patchCallback(e,s,r,o,a)}}const t={},n={_root:t},l={seq:0,maxOp:0,requests:[],clock:{},deps:[]};return e.backend&&(l.backendState=e.backend.init(),l.lastLocalChange=null),Object.defineProperty(t,a,{value:"_root"}),Object.defineProperty(t,s,{value:Object.freeze(e)}),Object.defineProperty(t,i,{value:Object.freeze({})}),Object.defineProperty(t,r,{value:Object.freeze(n)}),Object.defineProperty(t,o,{value:Object.freeze(l)}),Object.freeze(t)}function R(e,t,n){if("_root"!==e[a])throw new TypeError("The first argument to Automerge.change must be the document root");if(e[l])throw new TypeError("Calls to Automerge.change cannot be nested");if("function"==typeof t&&void 0===n&&([t,n]=[n,t]),"string"==typeof t&&(t={message:t}),void 0!==t&&!d(t))throw new TypeError("Unsupported type of options");const s=C(e);if(!s)throw new Error("Actor ID must be initialized with setActorId() before making a change");const r=new g(e,s);return n(b(r)),0===Object.keys(r.updated).length?[e,null]:E(e,r,t)}function C(e){return e[o].actorId||e[s].actorId}e.exports={init:A,from:function(e,t){return R(A(t),"Initialization",(t=>Object.assign(t,e)))},change:R,emptyChange:function(e,t){if("_root"!==e[a])throw new TypeError("The first argument to Automerge.emptyChange must be the document root");if("string"==typeof t&&(t={message:t}),void 0!==t&&!d(t))throw new TypeError("Unsupported type of options");const n=C(e);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");return E(e,new g(e,n),t)},applyPatch:function(e,t,n){if("_root"!==e[a])throw new TypeError("The first argument to Frontend.applyPatch must be the document root");const r=u(e[o]);if(e[s].backend){if(!n)throw new RangeError("applyPatch must be called with the updated backend state");return r.backendState=n,O(e,t,r,!0)}let i;if(r.requests.length>0)if(i=r.requests[0].before,t.actor===C(e)){if(r.requests[0].seq!==t.seq)throw new RangeError(`Mismatched sequence number: patch ${t.seq} does not match next request ${r.requests[0].seq}`);r.requests=r.requests.slice(1)}else r.requests=r.requests.slice();else i=e,r.requests=[];let l=O(i,t,r,!0);return 0===r.requests.length?l:(r.requests[0]=u(r.requests[0]),r.requests[0].before=l,j(e,{},r))},getObjectId:function(e){return e[a]},getObjectById:function(e,t){if(e[l])throw new TypeError("Cannot use getObjectById in a change callback");return e[r][t]},getActorId:C,setActorId:function(e,t){return x(t),j(e,{},Object.assign({},e[o],{actorId:t}))},getConflicts:function(e,t){if(e[i]&&e[i][t]&&Object.keys(e[i][t]).length>1)return e[i][t]},getLastLocalChange:function(e){return e[o]&&e[o].lastLocalChange?e[o].lastLocalChange:null},getBackendState:function(e,t=null,n="first"){if("_root"!==e[a]){const s=Array.isArray(e)?". Note: Automerge.applyChanges now returns an array.":"";throw t?new TypeError(`The ${n} argument to Automerge.${t} must be the document root${s}`):new TypeError(`Argument is not an Automerge document root${s}`)}return e[o].backendState},getElementIds:function(e){return e instanceof m?e.elems.map((e=>e.elemId)):e[c]},Text:m,Table:y,Counter:w,Observable:k,Float64:_,Int:I,Uint:v}},"./frontend/numbers.js":
/*!*****************************!*\
  !*** ./frontend/numbers.js ***!
  \*****************************/function(e){e.exports={Int:class{constructor(e){if(!(Number.isInteger(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER))throw new RangeError(`Value ${e} cannot be a uint`);this.value=e,Object.freeze(this)}},Uint:class{constructor(e){if(!(Number.isInteger(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=0))throw new RangeError(`Value ${e} cannot be a uint`);this.value=e,Object.freeze(this)}},Float64:class{constructor(e){if("number"!=typeof e)throw new RangeError(`Value ${e} cannot be a float64`);this.value=e||0,Object.freeze(this)}}}},"./frontend/observable.js":
/*!********************************!*\
  !*** ./frontend/observable.js ***!
  \********************************/function(e,t,n){const{OBJECT_ID:s,CONFLICTS:r}=n(/*! ./constants */"./frontend/constants.js");e.exports={Observable:class{constructor(){this.observers={}}patchCallback(e,t,n,s,r){this._objectUpdate(e.diffs,t,n,s,r)}_objectUpdate(e,t,n,s,o){if(e.objectId){if(this.observers[e.objectId])for(let r of this.observers[e.objectId])r(e,t,n,s,o);if("map"===e.type&&e.props)for(const a of Object.keys(e.props))for(const i of Object.keys(e.props[a]))this._objectUpdate(e.props[a][i],t&&t[r]&&t[r][a]&&t[r][a][i],n&&n[r]&&n[r][a]&&n[r][a][i],s,o);else if("table"===e.type&&e.props)for(const r of Object.keys(e.props))for(const a of Object.keys(e.props[r]))this._objectUpdate(e.props[r][a],t&&t.byId(r),n&&n.byId(r),s,o);else if("list"===e.type&&e.edits){let a=0;for(const i of e.edits)"insert"===i.action?(a-=1,this._objectUpdate(i.value,void 0,n&&n[r]&&n[r][i.index]&&n[r][i.index][i.elemId],s,o)):"multi-insert"===i.action?a-=i.values.length:"update"===i.action?this._objectUpdate(i.value,t&&t[r]&&t[r][i.index+a]&&t[r][i.index+a][i.opId],n&&n[r]&&n[r][i.index]&&n[r][i.index][i.opId],s,o):"remove"===i.action&&(a+=i.count)}else if("text"===e.type&&e.edits){let r=0;for(const a of e.edits)"insert"===a.action?(r-=1,this._objectUpdate(a.value,void 0,n&&n.get(a.index),s,o)):"multi-insert"===a.action?r-=a.values.length:"update"===a.action?this._objectUpdate(a.value,t&&t.get(a.index+r),n&&n.get(a.index),s,o):"remove"===a.action&&(r+=a.count)}}}observe(e,t){const n=e[s];if(!n)throw new TypeError("The observed object must be part of an Automerge document");this.observers[n]||(this.observers[n]=[]),this.observers[n].push(t)}}}},"./frontend/proxies.js":
/*!*****************************!*\
  !*** ./frontend/proxies.js ***!
  \*****************************/function(e,t,n){const{OBJECT_ID:s,CHANGE:r,STATE:o}=n(/*! ./constants */"./frontend/constants.js"),{createArrayOfNulls:a}=n(/*! ../src/common */"./src/common.js"),{Text:i}=n(/*! ./text */"./frontend/text.js"),{Table:l}=n(/*! ./table */"./frontend/table.js");function c(e){if("string"==typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e,10)),"number"!=typeof e)throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(e));if(e<0||isNaN(e)||e===1/0||e===-1/0)throw new RangeError("A list index must be positive, but you passed "+e);return e}const d={get(e,t){const{context:n,objectId:a,path:i}=e;return t===s?a:t===r?n:t===o?{actorId:n.actorId}:n.getObjectField(i,a,t)},set(e,t,n){const{context:s,path:r,readonly:o}=e;if(Array.isArray(o)&&o.indexOf(t)>=0)throw new RangeError(`Object property "${t}" cannot be modified`);return s.setMapKey(r,t,n),!0},deleteProperty(e,t){const{context:n,path:s,readonly:r}=e;if(Array.isArray(r)&&r.indexOf(t)>=0)throw new RangeError(`Object property "${t}" cannot be modified`);return n.deleteMapKey(s,t),!0},has(e,t){const{context:n,objectId:o}=e;return[s,r].includes(t)||t in n.getObject(o)},getOwnPropertyDescriptor(e,t){const{context:n,objectId:s}=e;if(t in n.getObject(s))return{configurable:!0,enumerable:!0,value:n.getObjectField(s,t)}},ownKeys(e){const{context:t,objectId:n}=e;return Object.keys(t.getObject(n))}},u={get(e,t){const[n,o,a]=e;return t===Symbol.iterator?n.getObject(o)[Symbol.iterator]:t===s?o:t===r?n:"length"===t?n.getObject(o).length:"string"==typeof t&&/^[0-9]+$/.test(t)?n.getObjectField(a,o,c(t)):function(e,t,n){const r={deleteAt(t,s){return e.splice(n,c(t),s||1,[]),this},fill(s,r,o){let a=e.getObject(t);for(let t=c(r||0);t<c(o||a.length);t++)e.setListIndex(n,t,s);return this},indexOf(n,r=0){const o=n[s];if(o){const n=e.getObject(t);for(let e=r;e<n.length;e++)if(n[e][s]===o)return e;return-1}return e.getObject(t).indexOf(n,r)},insertAt(t,...s){return e.splice(n,c(t),0,s),this},pop(){let s=e.getObject(t);if(0==s.length)return;const r=e.getObjectField(n,t,s.length-1);return e.splice(n,s.length-1,1,[]),r},push(...s){let r=e.getObject(t);return e.splice(n,r.length,0,s),e.getObject(t).length},shift(){if(0==e.getObject(t).length)return;const s=e.getObjectField(n,t,0);return e.splice(n,0,1,[]),s},splice(s,r,...o){let a=e.getObject(t);s=c(s),(void 0===r||r>a.length-s)&&(r=a.length-s);const i=[];for(let o=0;o<r;o++)i.push(e.getObjectField(n,t,s+o));return e.splice(n,s,r,o),i},unshift:(...s)=>(e.splice(n,0,0,s),e.getObject(t).length)};for(let n of["entries","keys","values"]){let s=e.getObject(t);r[n]=()=>s[n]()}for(let s of["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"])r[s]=(...r)=>e.getObject(t).map(((s,r)=>e.getObjectField(n,t,r)))[s](...r);return r}(n,o,a)[t]},set(e,t,n){const[s,r,o]=e;if("length"===t){if("number"!=typeof n)throw new RangeError("Invalid array length");const e=s.getObject(r).length;e>n?s.splice(o,n,e-n,[]):s.splice(o,e,0,a(n-e))}else s.setListIndex(o,c(t),n);return!0},deleteProperty(e,t){const[n,,s]=e;return n.splice(s,c(t),1,[]),!0},has(e,t){const[n,o]=e;return"string"==typeof t&&/^[0-9]+$/.test(t)?c(t)<n.getObject(o).length:["length",s,r].includes(t)},getOwnPropertyDescriptor(e,t){const[n,r]=e,o=n.getObject(r);if("length"===t)return{writable:!0,value:o.length};if(t===s)return{configurable:!1,enumerable:!1,value:r};if("string"==typeof t&&/^[0-9]+$/.test(t)){const e=c(t);if(e<o.length)return{configurable:!0,enumerable:!0,value:n.getObjectField(r,e)}}},ownKeys(e){const[t,n]=e,s=t.getObject(n);let r=["length"];for(let e of Object.keys(s))r.push(e);return r}};function h(e,t,n,s){return new Proxy({context:e,objectId:t,path:n,readonly:s},d)}function f(e,t,n){const s=this.getObject(t);return Array.isArray(s)?function(e,t,n){return new Proxy([e,t,n],u)}(this,t,e):s instanceof i||s instanceof l?s.getWriteable(this,e):h(this,t,e,n)}e.exports={rootObjectProxy:function(e){return e.instantiateObject=f,h(e,"_root",[])}}},"./frontend/table.js":
/*!***************************!*\
  !*** ./frontend/table.js ***!
  \***************************/function(e,t,n){const{OBJECT_ID:s,CONFLICTS:r}=n(/*! ./constants */"./frontend/constants.js"),{isObject:o,copyObject:a}=n(/*! ../src/common */"./src/common.js");function i(e,t,n){for(let s of e)if(t[s]!==n[s]){if("number"==typeof t[s]&&"number"==typeof n[s])return t[s]-n[s];{const e=""+t[s],r=""+n[s];if(e===r)continue;return e<r?-1:1}}return 0}class l{constructor(){this.entries=Object.freeze({}),this.opIds=Object.freeze({}),Object.freeze(this)}byId(e){return this.entries[e]}get ids(){return Object.keys(this.entries).filter((e=>{const t=this.entries[e];return o(t)&&t.id===e}))}get count(){return this.ids.length}get rows(){return this.ids.map((e=>this.byId(e)))}filter(e,t){return this.rows.filter(e,t)}find(e,t){return this.rows.find(e,t)}map(e,t){return this.rows.map(e,t)}sort(e){if("function"==typeof e)return this.rows.sort(e);if("string"==typeof e)return this.rows.sort(((t,n)=>i([e],t,n)));if(Array.isArray(e))return this.rows.sort(((t,n)=>i(e,t,n)));if(void 0===e)return this.rows.sort(((e,t)=>i(["id"],e,t)));throw new TypeError(`Unsupported sorting argument: ${e}`)}[Symbol.iterator](){let e=this.rows,t=-1;return{next:()=>(t+=1,t<e.length?{done:!1,value:e[t]}:{done:!0})}}_clone(){if(!this[s])throw new RangeError("clone() requires the objectId to be set");return d(this[s],a(this.entries),a(this.opIds))}_set(e,t,n){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");o(t)&&!Array.isArray(t)&&Object.defineProperty(t,"id",{value:e,enumerable:!0}),this.entries[e]=t,this.opIds[e]=n}remove(e){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[e],delete this.opIds[e]}_freeze(){Object.freeze(this.entries),Object.freeze(this.opIds),Object.freeze(this)}getWriteable(e,t){if(!this[s])throw new RangeError("getWriteable() requires the objectId to be set");const n=Object.create(c.prototype);return n[s]=this[s],n.context=e,n.entries=this.entries,n.opIds=this.opIds,n.path=t,n}toJSON(){const e={};for(let t of this.ids)e[t]=this.byId(t);return e}}class c extends l{byId(e){if(o(this.entries[e])&&this.entries[e].id===e){const t=this.entries[e][s],n=this.path.concat([{key:e,objectId:t}]);return this.context.instantiateObject(n,t,["id"])}}add(e){return this.context.addTableRow(this.path,e)}remove(e){if(!o(this.entries[e])||this.entries[e].id!==e)throw new RangeError(`There is no row with ID ${e} in this table`);this.context.deleteTableRow(this.path,e,this.opIds[e])}}function d(e,t,n){const o=Object.create(l.prototype);if(!e)throw new RangeError("instantiateTable requires an objectId to be given");return o[s]=e,o[r]=Object.freeze({}),o.entries=t||{},o.opIds=n||{},o}e.exports={Table:l,instantiateTable:d}},"./frontend/text.js":
/*!**************************!*\
  !*** ./frontend/text.js ***!
  \**************************/function(e,t,n){const{OBJECT_ID:s}=n(/*! ./constants */"./frontend/constants.js"),{isObject:r}=n(/*! ../src/common */"./src/common.js");class o{constructor(e){if("string"==typeof e)return a(void 0,[...e].map((e=>({value:e}))));if(Array.isArray(e))return a(void 0,e.map((e=>({value:e}))));if(void 0===e)return a(void 0,[]);throw new TypeError(`Unsupported initial value for Text: ${e}`)}get length(){return this.elems.length}get(e){const t=this.elems[e].value;if(this.context&&r(t)){const n=t[s],r=this.path.concat([{key:e,objectId:n}]);return this.context.instantiateObject(r,n)}return t}getElemId(e){return this.elems[e].elemId}[Symbol.iterator](){let e=this.elems,t=-1;return{next:()=>(t+=1,t<e.length?{done:!1,value:e[t].value}:{done:!0})}}toString(){let e="";for(const t of this.elems)"string"==typeof t.value&&(e+=t.value);return e}toSpans(){let e=[],t="";for(const n of this.elems)"string"==typeof n.value?t+=n.value:(t.length>0&&(e.push(t),t=""),e.push(n.value));return t.length>0&&e.push(t),e}toJSON(){return this.toString()}getWriteable(e,t){if(!this[s])throw new RangeError("getWriteable() requires the objectId to be set");const n=a(this[s],this.elems);return n.context=e,n.path=t,n}set(e,t){if(this.context)this.context.setListIndex(this.path,e,t);else{if(this[s])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems[e].value=t}return this}insertAt(e,...t){if(this.context)this.context.splice(this.path,e,0,t);else{if(this[s])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(e,0,...t.map((e=>({value:e}))))}return this}deleteAt(e,t=1){if(this.context)this.context.splice(this.path,e,t,[]);else{if(this[s])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(e,t)}return this}}for(let e of["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"])o.prototype[e]=function(...t){return[...this][e](...t)};function a(e,t){const n=Object.create(o.prototype);return n[s]=e,n.elems=t,n}e.exports={Text:o,instantiateText:a}},"./node_modules/fast-sha256/sha256.js":
/*!********************************************!*\
  !*** ./node_modules/fast-sha256/sha256.js ***!
  \********************************************/function(e,t,n){var s;!function(t,r){var o={};!function(e){"use strict";e.__esModule=!0,e.digestLength=32,e.blockSize=64;var t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function n(e,n,s,r,o){for(var a,i,l,c,d,u,h,f,p,b,g,m,y;o>=64;){for(a=n[0],i=n[1],l=n[2],c=n[3],d=n[4],u=n[5],h=n[6],f=n[7],b=0;b<16;b++)g=r+4*b,e[b]=(255&s[g])<<24|(255&s[g+1])<<16|(255&s[g+2])<<8|255&s[g+3];for(b=16;b<64;b++)m=((p=e[b-2])>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,y=((p=e[b-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[b]=(m+e[b-7]|0)+(y+e[b-16]|0);for(b=0;b<64;b++)m=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&h)|0)+(f+(t[b]+e[b]|0)|0)|0,y=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&i^a&l^i&l)|0,f=h,h=u,u=d,d=c+m|0,c=l,l=i,i=a,a=m+y|0;n[0]+=a,n[1]+=i,n[2]+=l,n[3]+=c,n[4]+=d,n[5]+=u,n[6]+=h,n[7]+=f,r+=64,o-=64}return r}var s=function(){function t(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return t.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},t.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},t.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var s=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[s++],t--;64===this.bufferLength&&(n(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(s=n(this.temp,this.state,e,s,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[s++],t--;return this},t.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,s=this.bufferLength,r=t/536870912|0,o=t<<3,a=t%64<56?64:128;this.buffer[s]=128;for(var i=s+1;i<a-8;i++)this.buffer[i]=0;this.buffer[a-8]=r>>>24&255,this.buffer[a-7]=r>>>16&255,this.buffer[a-6]=r>>>8&255,this.buffer[a-5]=r>>>0&255,this.buffer[a-4]=o>>>24&255,this.buffer[a-3]=o>>>16&255,this.buffer[a-2]=o>>>8&255,this.buffer[a-1]=o>>>0&255,n(this.temp,this.state,this.buffer,0,a),this.finished=!0}for(i=0;i<8;i++)e[4*i+0]=this.state[i]>>>24&255,e[4*i+1]=this.state[i]>>>16&255,e[4*i+2]=this.state[i]>>>8&255,e[4*i+3]=this.state[i]>>>0&255;return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},t.prototype._restoreState=function(e,t){for(var n=0;n<this.state.length;n++)this.state[n]=e[n];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},t}();e.Hash=s;var r=function(){function e(e){this.inner=new s,this.outer=new s,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new s).update(e).finish(t).clean();else for(var n=0;n<e.length;n++)t[n]=e[n];for(n=0;n<t.length;n++)t[n]^=54;for(this.inner.update(t),n=0;n<t.length;n++)t[n]^=106;for(this.outer.update(t),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),n=0;n<t.length;n++)t[n]=0}return e.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},e.prototype.clean=function(){for(var e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()},e.prototype.update=function(e){return this.inner.update(e),this},e.prototype.finish=function(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e}();function o(e){var t=(new s).update(e),n=t.digest();return t.clean(),n}function a(e,t){var n=new r(e).update(t),s=n.digest();return n.clean(),s}function i(e,t,n,s){var r=s[0];if(0===r)throw new Error("hkdf: cannot expand more");t.reset(),r>1&&t.update(e),n&&t.update(n),t.update(s),t.finish(e),s[0]++}e.HMAC=r,e.hash=o,e.default=o,e.hmac=a;var l=new Uint8Array(e.digestLength);function c(e,t,n,s){void 0===t&&(t=l),void 0===s&&(s=32);for(var o=new Uint8Array([1]),c=a(t,e),d=new r(c),u=new Uint8Array(d.digestLength),h=u.length,f=new Uint8Array(s),p=0;p<s;p++)h===u.length&&(i(u,d,n,o),h=0),f[p]=u[h++];return d.clean(),u.fill(0),o.fill(0),f}function d(e,t,n,s){for(var o=new r(e),a=o.digestLength,i=new Uint8Array(4),l=new Uint8Array(a),c=new Uint8Array(a),d=new Uint8Array(s),u=0;u*a<s;u++){var h=u+1;i[0]=h>>>24&255,i[1]=h>>>16&255,i[2]=h>>>8&255,i[3]=h>>>0&255,o.reset(),o.update(t),o.update(i),o.finish(c);for(var f=0;f<a;f++)l[f]=c[f];for(f=2;f<=n;f++){o.reset(),o.update(c).finish(c);for(var p=0;p<a;p++)l[p]^=c[p]}for(f=0;f<a&&u*a+f<s;f++)d[u*a+f]=l[f]}for(u=0;u<a;u++)l[u]=c[u]=0;for(u=0;u<4;u++)i[u]=0;return o.clean(),d}e.hkdf=c,e.pbkdf2=d}(o);var a=o.default;for(var i in o)a[i]=o[i];"object"==typeof e.exports?e.exports=a:void 0===(s=function(){return a}.call(o,n,o,e))||(e.exports=s)}()},"./node_modules/pako/index.js":
/*!************************************!*\
  !*** ./node_modules/pako/index.js ***!
  \************************************/function(e,t,n){"use strict";const{Deflate:s,deflate:r,deflateRaw:o,gzip:a}=n(/*! ./lib/deflate */"./node_modules/pako/lib/deflate.js"),{Inflate:i,inflate:l,inflateRaw:c,ungzip:d}=n(/*! ./lib/inflate */"./node_modules/pako/lib/inflate.js"),u=n(/*! ./lib/zlib/constants */"./node_modules/pako/lib/zlib/constants.js");e.exports.Deflate=s,e.exports.deflate=r,e.exports.deflateRaw=o,e.exports.gzip=a,e.exports.Inflate=i,e.exports.inflate=l,e.exports.inflateRaw=c,e.exports.ungzip=d,e.exports.constants=u},"./node_modules/pako/lib/deflate.js":
/*!******************************************!*\
  !*** ./node_modules/pako/lib/deflate.js ***!
  \******************************************/function(e,t,n){"use strict";const s=n(/*! ./zlib/deflate */"./node_modules/pako/lib/zlib/deflate.js"),r=n(/*! ./utils/common */"./node_modules/pako/lib/utils/common.js"),o=n(/*! ./utils/strings */"./node_modules/pako/lib/utils/strings.js"),a=n(/*! ./zlib/messages */"./node_modules/pako/lib/zlib/messages.js"),i=n(/*! ./zlib/zstream */"./node_modules/pako/lib/zlib/zstream.js"),l=Object.prototype.toString,{Z_NO_FLUSH:c,Z_SYNC_FLUSH:d,Z_FULL_FLUSH:u,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:b,Z_DEFAULT_STRATEGY:g,Z_DEFLATED:m}=n(/*! ./zlib/constants */"./node_modules/pako/lib/zlib/constants.js");function y(e){this.options=r.assign({level:b,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:g},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;let n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==f)throw new Error(a[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=s.deflateSetDictionary(this.strm,e),n!==f)throw new Error(a[n]);this._dict_set=!0}}function w(e,t){const n=new y(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}y.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let a,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?h:c,"string"==typeof e?n.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===d||i===u)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(a=s.deflate(n,i),a===p)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===f;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},y.prototype.onData=function(e){this.chunks.push(e)},y.prototype.onEnd=function(e){e===f&&(this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=y,e.exports.deflate=w,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,w(e,t)},e.exports.constants=n(/*! ./zlib/constants */"./node_modules/pako/lib/zlib/constants.js")},"./node_modules/pako/lib/inflate.js":
/*!******************************************!*\
  !*** ./node_modules/pako/lib/inflate.js ***!
  \******************************************/function(e,t,n){"use strict";const s=n(/*! ./zlib/inflate */"./node_modules/pako/lib/zlib/inflate.js"),r=n(/*! ./utils/common */"./node_modules/pako/lib/utils/common.js"),o=n(/*! ./utils/strings */"./node_modules/pako/lib/utils/strings.js"),a=n(/*! ./zlib/messages */"./node_modules/pako/lib/zlib/messages.js"),i=n(/*! ./zlib/zstream */"./node_modules/pako/lib/zlib/zstream.js"),l=n(/*! ./zlib/gzheader */"./node_modules/pako/lib/zlib/gzheader.js"),c=Object.prototype.toString,{Z_NO_FLUSH:d,Z_FINISH:u,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:b,Z_DATA_ERROR:g,Z_MEM_ERROR:m}=n(/*! ./zlib/constants */"./node_modules/pako/lib/zlib/constants.js");function y(e){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;let n=s.inflateInit2(this.strm,t.windowBits);if(n!==h)throw new Error(a[n]);if(this.header=new l,s.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=s.inflateSetDictionary(this.strm,t.dictionary),n!==h)))throw new Error(a[n])}function w(e,t){const n=new y(t);if(n.push(e),n.err)throw n.msg||a[n.err];return n.result}y.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let i,l,y;if(this.ended)return!1;for(l=t===~~t?t:!0===t?u:d,"[object ArrayBuffer]"===c.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=s.inflate(n,l),i===p&&a&&(i=s.inflateSetDictionary(n,a),i===h?i=s.inflate(n,l):i===g&&(i=p));n.avail_in>0&&i===f&&n.state.wrap>0&&0!==e[n.next_in];)s.inflateReset(n),i=s.inflate(n,l);switch(i){case b:case g:case p:case m:return this.onEnd(i),this.ended=!0,!1}if(y=n.avail_out,n.next_out&&(0===n.avail_out||i===f))if("string"===this.options.to){let e=o.utf8border(n.output,n.next_out),t=n.next_out-e,s=o.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(s)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==h||0!==y){if(i===f)return i=s.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},y.prototype.onData=function(e){this.chunks.push(e)},y.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=y,e.exports.inflate=w,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},e.exports.ungzip=w,e.exports.constants=n(/*! ./zlib/constants */"./node_modules/pako/lib/zlib/constants.js")},"./node_modules/pako/lib/utils/common.js":
/*!***********************************************!*\
  !*** ./node_modules/pako/lib/utils/common.js ***!
  \***********************************************/function(e){"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const s=n.shift();if(s){if("object"!=typeof s)throw new TypeError(s+"must be non-object");for(const n in s)t(s,n)&&(e[n]=s[n])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let n=0,s=e.length;n<s;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,s=0,r=e.length;t<r;t++){let r=e[t];n.set(r,s),s+=r.length}return n}},"./node_modules/pako/lib/utils/strings.js":
/*!************************************************!*\
  !*** ./node_modules/pako/lib/utils/strings.js ***!
  \************************************************/function(e){"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}const n=new Uint8Array(256);for(let e=0;e<256;e++)n[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;n[254]=n[254]=1,e.exports.string2buf=e=>{let t,n,s,r,o,a=e.length,i=0;for(r=0;r<a;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<a&&(s=e.charCodeAt(r+1),56320==(64512&s)&&(n=65536+(n-55296<<10)+(s-56320),r++)),i+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(i),o=0,r=0;o<i;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<a&&(s=e.charCodeAt(r+1),56320==(64512&s)&&(n=65536+(n-55296<<10)+(s-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},e.exports.buf2string=(e,s)=>{let r,o;const a=s||e.length,i=new Array(2*a);for(o=0,r=0;r<a;){let t=e[r++];if(t<128){i[o++]=t;continue}let s=n[t];if(s>4)i[o++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<a;)t=t<<6|63&e[r++],s--;s>1?i[o++]=65533:t<65536?i[o++]=t:(t-=65536,i[o++]=55296|t>>10&1023,i[o++]=56320|1023&t)}}return((e,n)=>{if(n<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let s="";for(let t=0;t<n;t++)s+=String.fromCharCode(e[t]);return s})(i,o)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let s=t-1;for(;s>=0&&128==(192&e[s]);)s--;return s<0||0===s?t:s+n[e[s]]>t?s:t}},"./node_modules/pako/lib/zlib/adler32.js":
/*!***********************************************!*\
  !*** ./node_modules/pako/lib/zlib/adler32.js ***!
  \***********************************************/function(e){"use strict";e.exports=(e,t,n,s)=>{let r=65535&e|0,o=e>>>16&65535|0,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{r=r+t[s++]|0,o=o+r|0}while(--a);r%=65521,o%=65521}return r|o<<16|0}},"./node_modules/pako/lib/zlib/constants.js":
/*!*************************************************!*\
  !*** ./node_modules/pako/lib/zlib/constants.js ***!
  \*************************************************/function(e){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/pako/lib/zlib/crc32.js":
/*!*********************************************!*\
  !*** ./node_modules/pako/lib/zlib/crc32.js ***!
  \*********************************************/function(e){"use strict";const t=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());e.exports=(e,n,s,r)=>{const o=t,a=r+s;e^=-1;for(let t=r;t<a;t++)e=e>>>8^o[255&(e^n[t])];return-1^e}},"./node_modules/pako/lib/zlib/deflate.js":
/*!***********************************************!*\
  !*** ./node_modules/pako/lib/zlib/deflate.js ***!
  \***********************************************/function(e,t,n){"use strict";const{_tr_init:s,_tr_stored_block:r,_tr_flush_block:o,_tr_tally:a,_tr_align:i}=n(/*! ./trees */"./node_modules/pako/lib/zlib/trees.js"),l=n(/*! ./adler32 */"./node_modules/pako/lib/zlib/adler32.js"),c=n(/*! ./crc32 */"./node_modules/pako/lib/zlib/crc32.js"),d=n(/*! ./messages */"./node_modules/pako/lib/zlib/messages.js"),{Z_NO_FLUSH:u,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:b,Z_OK:g,Z_STREAM_END:m,Z_STREAM_ERROR:y,Z_DATA_ERROR:w,Z_BUF_ERROR:_,Z_DEFAULT_COMPRESSION:I,Z_FILTERED:v,Z_HUFFMAN_ONLY:k,Z_RLE:x,Z_FIXED:j,Z_DEFAULT_STRATEGY:E,Z_UNKNOWN:O,Z_DEFLATED:A}=n(/*! ./constants */"./node_modules/pako/lib/zlib/constants.js"),R=258,C=262,V=103,S=113,N=666,T=(e,t)=>(e.msg=d[t],t),U=e=>(e<<1)-(e>4?9:0),L=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let B=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const z=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},D=(e,t)=>{o(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,z(e.strm)},H=(e,t)=>{e.pending_buf[e.pending++]=t},$=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},M=(e,t,n,s)=>{let r=e.avail_in;return r>s&&(r=s),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=l(e.adler,t,r,n):2===e.state.wrap&&(e.adler=c(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},P=(e,t)=>{let n,s,r=e.max_chain_length,o=e.strstart,a=e.prev_length,i=e.nice_match;const l=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+R;let f=c[o+a-1],p=c[o+a];e.prev_length>=e.good_match&&(r>>=2),i>e.lookahead&&(i=e.lookahead);do{if(n=t,c[n+a]===p&&c[n+a-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h);if(s=R-(h-o),o=h-R,s>a){if(e.match_start=t,a=s,s>=i)break;f=c[o+a-1],p=c[o+a]}}}while((t=u[t&d])>l&&0!=--r);return a<=e.lookahead?a:e.lookahead},F=e=>{const t=e.w_size;let n,s,r,o,a;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-C)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,s=e.hash_size,n=s;do{r=e.head[--n],e.head[n]=r>=t?r-t:0}while(--s);s=t,n=s;do{r=e.prev[--n],e.prev[n]=r>=t?r-t:0}while(--s);o+=t}if(0===e.strm.avail_in)break;if(s=M(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=s,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=B(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=B(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<C&&0!==e.strm.avail_in)},q=(e,t)=>{let n,s;for(;;){if(e.lookahead<C){if(F(e),e.lookahead<C&&t===u)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=B(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-C&&(e.match_length=P(e,n)),e.match_length>=3)if(s=a(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=B(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=B(e,e.ins_h,e.window[e.strstart+1]);else s=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(D(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===p?(D(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?1:2},Z=(e,t)=>{let n,s,r;for(;;){if(e.lookahead<C){if(F(e),e.lookahead<C&&t===u)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=B(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-C&&(e.match_length=P(e,n),e.match_length<=5&&(e.strategy===v||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,s=a(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=B(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,s&&(D(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(s=a(e,0,e.window[e.strstart-1]),s&&D(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=a(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===p?(D(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?1:2};function G(e,t,n,s,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=s,this.func=r}const K=[new G(0,0,0,0,((e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(F(e),0===e.lookahead&&t===u)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const s=e.block_start+n;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,D(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-C&&(D(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(D(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(D(e,!1),e.strm.avail_out),1)})),new G(4,4,8,4,q),new G(4,5,16,8,q),new G(4,6,32,32,q),new G(4,4,16,16,Z),new G(8,16,32,32,Z),new G(8,16,128,128,Z),new G(8,32,128,256,Z),new G(32,128,258,1024,Z),new G(32,258,258,4096,Z)];function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Y=e=>{if(!e||!e.state)return T(e,y);e.total_in=e.total_out=0,e.data_type=O;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:S,e.adler=2===t.wrap?0:1,t.last_flush=u,s(t),g},J=e=>{const t=Y(e);var n;return t===g&&((n=e.state).window_size=2*n.w_size,L(n.head),n.max_lazy_match=K[n.level].max_lazy,n.good_match=K[n.level].good_length,n.nice_match=K[n.level].nice_length,n.max_chain_length=K[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},X=(e,t,n,s,r,o)=>{if(!e)return y;let a=1;if(t===I&&(t=6),s<0?(a=0,s=-s):s>15&&(a=2,s-=16),r<1||r>9||n!==A||s<8||s>15||t<0||t>9||o<0||o>j)return T(e,y);8===s&&(s=9);const i=new W;return e.state=i,i.strm=e,i.wrap=a,i.gzhead=null,i.w_bits=s,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=r+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+3-1)/3),i.window=new Uint8Array(2*i.w_size),i.head=new Uint16Array(i.hash_size),i.prev=new Uint16Array(i.w_size),i.lit_bufsize=1<<r+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new Uint8Array(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=t,i.strategy=o,i.method=n,J(e)};e.exports.deflateInit=(e,t)=>X(e,t,A,15,8,E),e.exports.deflateInit2=X,e.exports.deflateReset=J,e.exports.deflateResetKeep=Y,e.exports.deflateSetHeader=(e,t)=>e&&e.state?2!==e.state.wrap?y:(e.state.gzhead=t,g):y,e.exports.deflate=(e,t)=>{let n,s;if(!e||!e.state||t>b||t<0)return e?T(e,y):y;const o=e.state;if(!e.output||!e.input&&0!==e.avail_in||o.status===N&&t!==p)return T(e,0===e.avail_out?_:y);o.strm=e;const l=o.last_flush;if(o.last_flush=t,42===o.status)if(2===o.wrap)e.adler=0,H(o,31),H(o,139),H(o,8),o.gzhead?(H(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),H(o,255&o.gzhead.time),H(o,o.gzhead.time>>8&255),H(o,o.gzhead.time>>16&255),H(o,o.gzhead.time>>24&255),H(o,9===o.level?2:o.strategy>=k||o.level<2?4:0),H(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(H(o,255&o.gzhead.extra.length),H(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=c(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(H(o,0),H(o,0),H(o,0),H(o,0),H(o,0),H(o,9===o.level?2:o.strategy>=k||o.level<2?4:0),H(o,3),o.status=S);else{let t=A+(o.w_bits-8<<4)<<8,n=-1;n=o.strategy>=k||o.level<2?0:o.level<6?1:6===o.level?2:3,t|=n<<6,0!==o.strstart&&(t|=32),t+=31-t%31,o.status=S,$(o,t),0!==o.strstart&&($(o,e.adler>>>16),$(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(n=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>n&&(e.adler=c(e.adler,o.pending_buf,o.pending-n,n)),z(e),n=o.pending,o.pending!==o.pending_buf_size));)H(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>n&&(e.adler=c(e.adler,o.pending_buf,o.pending-n,n)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(e.adler=c(e.adler,o.pending_buf,o.pending-n,n)),z(e),n=o.pending,o.pending===o.pending_buf_size)){s=1;break}s=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,H(o,s)}while(0!==s);o.gzhead.hcrc&&o.pending>n&&(e.adler=c(e.adler,o.pending_buf,o.pending-n,n)),0===s&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(e.adler=c(e.adler,o.pending_buf,o.pending-n,n)),z(e),n=o.pending,o.pending===o.pending_buf_size)){s=1;break}s=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,H(o,s)}while(0!==s);o.gzhead.hcrc&&o.pending>n&&(e.adler=c(e.adler,o.pending_buf,o.pending-n,n)),0===s&&(o.status=V)}else o.status=V;if(o.status===V&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&z(e),o.pending+2<=o.pending_buf_size&&(H(o,255&e.adler),H(o,e.adler>>8&255),e.adler=0,o.status=S)):o.status=S),0!==o.pending){if(z(e),0===e.avail_out)return o.last_flush=-1,g}else if(0===e.avail_in&&U(t)<=U(l)&&t!==p)return T(e,_);if(o.status===N&&0!==e.avail_in)return T(e,_);if(0!==e.avail_in||0!==o.lookahead||t!==u&&o.status!==N){let n=o.strategy===k?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(F(e),0===e.lookahead)){if(t===u)return 1;break}if(e.match_length=0,n=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(D(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(D(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?1:2})(o,t):o.strategy===x?((e,t)=>{let n,s,r,o;const i=e.window;for(;;){if(e.lookahead<=R){if(F(e),e.lookahead<=R&&t===u)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,s=i[r],s===i[++r]&&s===i[++r]&&s===i[++r])){o=e.strstart+R;do{}while(s===i[++r]&&s===i[++r]&&s===i[++r]&&s===i[++r]&&s===i[++r]&&s===i[++r]&&s===i[++r]&&s===i[++r]&&r<o);e.match_length=R-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=a(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(D(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(D(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(D(e,!1),0===e.strm.avail_out)?1:2})(o,t):K[o.level].func(o,t);if(3!==n&&4!==n||(o.status=N),1===n||3===n)return 0===e.avail_out&&(o.last_flush=-1),g;if(2===n&&(t===h?i(o):t!==b&&(r(o,0,0,!1),t===f&&(L(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),z(e),0===e.avail_out))return o.last_flush=-1,g}return t!==p?g:o.wrap<=0?m:(2===o.wrap?(H(o,255&e.adler),H(o,e.adler>>8&255),H(o,e.adler>>16&255),H(o,e.adler>>24&255),H(o,255&e.total_in),H(o,e.total_in>>8&255),H(o,e.total_in>>16&255),H(o,e.total_in>>24&255)):($(o,e.adler>>>16),$(o,65535&e.adler)),z(e),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?g:m)},e.exports.deflateEnd=e=>{if(!e||!e.state)return y;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==V&&t!==S&&t!==N?T(e,y):(e.state=null,t===S?T(e,w):g)},e.exports.deflateSetDictionary=(e,t)=>{let n=t.length;if(!e||!e.state)return y;const s=e.state,r=s.wrap;if(2===r||1===r&&42!==s.status||s.lookahead)return y;if(1===r&&(e.adler=l(e.adler,t,n,0)),s.wrap=0,n>=s.w_size){0===r&&(L(s.head),s.strstart=0,s.block_start=0,s.insert=0);let e=new Uint8Array(s.w_size);e.set(t.subarray(n-s.w_size,n),0),t=e,n=s.w_size}const o=e.avail_in,a=e.next_in,i=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,F(s);s.lookahead>=3;){let e=s.strstart,t=s.lookahead-2;do{s.ins_h=B(s,s.ins_h,s.window[e+3-1]),s.prev[e&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=e,e++}while(--t);s.strstart=e,s.lookahead=2,F(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=2,s.match_available=0,e.next_in=a,e.input=i,e.avail_in=o,s.wrap=r,g},e.exports.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/pako/lib/zlib/gzheader.js":
/*!************************************************!*\
  !*** ./node_modules/pako/lib/zlib/gzheader.js ***!
  \************************************************/function(e){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},"./node_modules/pako/lib/zlib/inffast.js":
/*!***********************************************!*\
  !*** ./node_modules/pako/lib/zlib/inffast.js ***!
  \***********************************************/function(e){"use strict";e.exports=function(e,t){let n,s,r,o,a,i,l,c,d,u,h,f,p,b,g,m,y,w,_,I,v,k,x,j;const E=e.state;n=e.next_in,x=e.input,s=n+(e.avail_in-5),r=e.next_out,j=e.output,o=r-(t-e.avail_out),a=r+(e.avail_out-257),i=E.dmax,l=E.wsize,c=E.whave,d=E.wnext,u=E.window,h=E.hold,f=E.bits,p=E.lencode,b=E.distcode,g=(1<<E.lenbits)-1,m=(1<<E.distbits)-1;e:do{f<15&&(h+=x[n++]<<f,f+=8,h+=x[n++]<<f,f+=8),y=p[h&g];t:for(;;){if(w=y>>>24,h>>>=w,f-=w,w=y>>>16&255,0===w)j[r++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=p[(65535&y)+(h&(1<<w)-1)];continue t}if(32&w){E.mode=12;break e}e.msg="invalid literal/length code",E.mode=30;break e}_=65535&y,w&=15,w&&(f<w&&(h+=x[n++]<<f,f+=8),_+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=x[n++]<<f,f+=8,h+=x[n++]<<f,f+=8),y=b[h&m];n:for(;;){if(w=y>>>24,h>>>=w,f-=w,w=y>>>16&255,!(16&w)){if(0==(64&w)){y=b[(65535&y)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",E.mode=30;break e}if(I=65535&y,w&=15,f<w&&(h+=x[n++]<<f,f+=8,f<w&&(h+=x[n++]<<f,f+=8)),I+=h&(1<<w)-1,I>i){e.msg="invalid distance too far back",E.mode=30;break e}if(h>>>=w,f-=w,w=r-o,I>w){if(w=I-w,w>c&&E.sane){e.msg="invalid distance too far back",E.mode=30;break e}if(v=0,k=u,0===d){if(v+=l-w,w<_){_-=w;do{j[r++]=u[v++]}while(--w);v=r-I,k=j}}else if(d<w){if(v+=l+d-w,w-=d,w<_){_-=w;do{j[r++]=u[v++]}while(--w);if(v=0,d<_){w=d,_-=w;do{j[r++]=u[v++]}while(--w);v=r-I,k=j}}}else if(v+=d-w,w<_){_-=w;do{j[r++]=u[v++]}while(--w);v=r-I,k=j}for(;_>2;)j[r++]=k[v++],j[r++]=k[v++],j[r++]=k[v++],_-=3;_&&(j[r++]=k[v++],_>1&&(j[r++]=k[v++]))}else{v=r-I;do{j[r++]=j[v++],j[r++]=j[v++],j[r++]=j[v++],_-=3}while(_>2);_&&(j[r++]=j[v++],_>1&&(j[r++]=j[v++]))}break}}break}}while(n<s&&r<a);_=f>>3,n-=_,f-=_<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=r,e.avail_in=n<s?s-n+5:5-(n-s),e.avail_out=r<a?a-r+257:257-(r-a),E.hold=h,E.bits=f}},"./node_modules/pako/lib/zlib/inflate.js":
/*!***********************************************!*\
  !*** ./node_modules/pako/lib/zlib/inflate.js ***!
  \***********************************************/function(e,t,n){"use strict";const s=n(/*! ./adler32 */"./node_modules/pako/lib/zlib/adler32.js"),r=n(/*! ./crc32 */"./node_modules/pako/lib/zlib/crc32.js"),o=n(/*! ./inffast */"./node_modules/pako/lib/zlib/inffast.js"),a=n(/*! ./inftrees */"./node_modules/pako/lib/zlib/inftrees.js"),{Z_FINISH:i,Z_BLOCK:l,Z_TREES:c,Z_OK:d,Z_STREAM_END:u,Z_NEED_DICT:h,Z_STREAM_ERROR:f,Z_DATA_ERROR:p,Z_MEM_ERROR:b,Z_BUF_ERROR:g,Z_DEFLATED:m}=n(/*! ./constants */"./node_modules/pako/lib/zlib/constants.js"),y=12,w=30,_=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function I(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const v=e=>{if(!e||!e.state)return f;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,d},k=e=>{if(!e||!e.state)return f;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,v(e)},x=(e,t)=>{let n;if(!e||!e.state)return f;const s=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?f:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=n,s.wbits=t,k(e))},j=(e,t)=>{if(!e)return f;const n=new I;e.state=n,n.window=null;const s=x(e,t);return s!==d&&(e.state=null),s};let E,O,A=!0;const R=e=>{if(A){E=new Int32Array(512),O=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,O,0,e.work,{bits:5}),A=!1}e.lencode=E,e.lenbits=9,e.distcode=O,e.distbits=5},C=(e,t,n,s)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>s&&(r=s),o.window.set(t.subarray(n-s,n-s+r),o.wnext),(s-=r)?(o.window.set(t.subarray(n-s,n),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};e.exports.inflateReset=k,e.exports.inflateReset2=x,e.exports.inflateResetKeep=v,e.exports.inflateInit=e=>j(e,15),e.exports.inflateInit2=j,e.exports.inflate=(e,t)=>{let n,I,v,k,x,j,E,O,A,V,S,N,T,U,L,B,z,D,H,$,M,P,F=0;const q=new Uint8Array(4);let Z,G;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return f;n=e.state,n.mode===y&&(n.mode=13),x=e.next_out,v=e.output,E=e.avail_out,k=e.next_in,I=e.input,j=e.avail_in,O=n.hold,A=n.bits,V=j,S=E,P=d;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;A<16;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(2&n.wrap&&35615===O){n.check=0,q[0]=255&O,q[1]=O>>>8&255,n.check=r(n.check,q,2,0),O=0,A=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&O)<<8)+(O>>8))%31){e.msg="incorrect header check",n.mode=w;break}if((15&O)!==m){e.msg="unknown compression method",n.mode=w;break}if(O>>>=4,A-=4,M=8+(15&O),0===n.wbits)n.wbits=M;else if(M>n.wbits){e.msg="invalid window size",n.mode=w;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&O?10:y,O=0,A=0;break;case 2:for(;A<16;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(n.flags=O,(255&n.flags)!==m){e.msg="unknown compression method",n.mode=w;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=w;break}n.head&&(n.head.text=O>>8&1),512&n.flags&&(q[0]=255&O,q[1]=O>>>8&255,n.check=r(n.check,q,2,0)),O=0,A=0,n.mode=3;case 3:for(;A<32;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}n.head&&(n.head.time=O),512&n.flags&&(q[0]=255&O,q[1]=O>>>8&255,q[2]=O>>>16&255,q[3]=O>>>24&255,n.check=r(n.check,q,4,0)),O=0,A=0,n.mode=4;case 4:for(;A<16;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}n.head&&(n.head.xflags=255&O,n.head.os=O>>8),512&n.flags&&(q[0]=255&O,q[1]=O>>>8&255,n.check=r(n.check,q,2,0)),O=0,A=0,n.mode=5;case 5:if(1024&n.flags){for(;A<16;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}n.length=O,n.head&&(n.head.extra_len=O),512&n.flags&&(q[0]=255&O,q[1]=O>>>8&255,n.check=r(n.check,q,2,0)),O=0,A=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(N=n.length,N>j&&(N=j),N&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(I.subarray(k,k+N),M)),512&n.flags&&(n.check=r(n.check,I,N,k)),j-=N,k+=N,n.length-=N),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===j)break e;N=0;do{M=I[k+N++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M))}while(M&&N<j);if(512&n.flags&&(n.check=r(n.check,I,N,k)),j-=N,k+=N,M)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===j)break e;N=0;do{M=I[k+N++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M))}while(M&&N<j);if(512&n.flags&&(n.check=r(n.check,I,N,k)),j-=N,k+=N,M)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;A<16;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(O!==(65535&n.check)){e.msg="header crc mismatch",n.mode=w;break}O=0,A=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=y;break;case 10:for(;A<32;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}e.adler=n.check=_(O),O=0,A=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=x,e.avail_out=E,e.next_in=k,e.avail_in=j,n.hold=O,n.bits=A,h;e.adler=n.check=1,n.mode=y;case y:if(t===l||t===c)break e;case 13:if(n.last){O>>>=7&A,A-=7&A,n.mode=27;break}for(;A<3;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}switch(n.last=1&O,O>>>=1,A-=1,3&O){case 0:n.mode=14;break;case 1:if(R(n),n.mode=20,t===c){O>>>=2,A-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=w}O>>>=2,A-=2;break;case 14:for(O>>>=7&A,A-=7&A;A<32;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if((65535&O)!=(O>>>16^65535)){e.msg="invalid stored block lengths",n.mode=w;break}if(n.length=65535&O,O=0,A=0,n.mode=15,t===c)break e;case 15:n.mode=16;case 16:if(N=n.length,N){if(N>j&&(N=j),N>E&&(N=E),0===N)break e;v.set(I.subarray(k,k+N),x),j-=N,k+=N,E-=N,x+=N,n.length-=N;break}n.mode=y;break;case 17:for(;A<14;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(n.nlen=257+(31&O),O>>>=5,A-=5,n.ndist=1+(31&O),O>>>=5,A-=5,n.ncode=4+(15&O),O>>>=4,A-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=w;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;A<3;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}n.lens[K[n.have++]]=7&O,O>>>=3,A-=3}for(;n.have<19;)n.lens[K[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Z={bits:n.lenbits},P=a(0,n.lens,0,19,n.lencode,0,n.work,Z),n.lenbits=Z.bits,P){e.msg="invalid code lengths set",n.mode=w;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;F=n.lencode[O&(1<<n.lenbits)-1],L=F>>>24,B=F>>>16&255,z=65535&F,!(L<=A);){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(z<16)O>>>=L,A-=L,n.lens[n.have++]=z;else{if(16===z){for(G=L+2;A<G;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(O>>>=L,A-=L,0===n.have){e.msg="invalid bit length repeat",n.mode=w;break}M=n.lens[n.have-1],N=3+(3&O),O>>>=2,A-=2}else if(17===z){for(G=L+3;A<G;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}O>>>=L,A-=L,M=0,N=3+(7&O),O>>>=3,A-=3}else{for(G=L+7;A<G;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}O>>>=L,A-=L,M=0,N=11+(127&O),O>>>=7,A-=7}if(n.have+N>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=w;break}for(;N--;)n.lens[n.have++]=M}}if(n.mode===w)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=w;break}if(n.lenbits=9,Z={bits:n.lenbits},P=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,Z),n.lenbits=Z.bits,P){e.msg="invalid literal/lengths set",n.mode=w;break}if(n.distbits=6,n.distcode=n.distdyn,Z={bits:n.distbits},P=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Z),n.distbits=Z.bits,P){e.msg="invalid distances set",n.mode=w;break}if(n.mode=20,t===c)break e;case 20:n.mode=21;case 21:if(j>=6&&E>=258){e.next_out=x,e.avail_out=E,e.next_in=k,e.avail_in=j,n.hold=O,n.bits=A,o(e,S),x=e.next_out,v=e.output,E=e.avail_out,k=e.next_in,I=e.input,j=e.avail_in,O=n.hold,A=n.bits,n.mode===y&&(n.back=-1);break}for(n.back=0;F=n.lencode[O&(1<<n.lenbits)-1],L=F>>>24,B=F>>>16&255,z=65535&F,!(L<=A);){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(B&&0==(240&B)){for(D=L,H=B,$=z;F=n.lencode[$+((O&(1<<D+H)-1)>>D)],L=F>>>24,B=F>>>16&255,z=65535&F,!(D+L<=A);){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}O>>>=D,A-=D,n.back+=D}if(O>>>=L,A-=L,n.back+=L,n.length=z,0===B){n.mode=26;break}if(32&B){n.back=-1,n.mode=y;break}if(64&B){e.msg="invalid literal/length code",n.mode=w;break}n.extra=15&B,n.mode=22;case 22:if(n.extra){for(G=n.extra;A<G;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}n.length+=O&(1<<n.extra)-1,O>>>=n.extra,A-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;F=n.distcode[O&(1<<n.distbits)-1],L=F>>>24,B=F>>>16&255,z=65535&F,!(L<=A);){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(0==(240&B)){for(D=L,H=B,$=z;F=n.distcode[$+((O&(1<<D+H)-1)>>D)],L=F>>>24,B=F>>>16&255,z=65535&F,!(D+L<=A);){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}O>>>=D,A-=D,n.back+=D}if(O>>>=L,A-=L,n.back+=L,64&B){e.msg="invalid distance code",n.mode=w;break}n.offset=z,n.extra=15&B,n.mode=24;case 24:if(n.extra){for(G=n.extra;A<G;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}n.offset+=O&(1<<n.extra)-1,O>>>=n.extra,A-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=w;break}n.mode=25;case 25:if(0===E)break e;if(N=S-E,n.offset>N){if(N=n.offset-N,N>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=w;break}N>n.wnext?(N-=n.wnext,T=n.wsize-N):T=n.wnext-N,N>n.length&&(N=n.length),U=n.window}else U=v,T=x-n.offset,N=n.length;N>E&&(N=E),E-=N,n.length-=N;do{v[x++]=U[T++]}while(--N);0===n.length&&(n.mode=21);break;case 26:if(0===E)break e;v[x++]=n.length,E--,n.mode=21;break;case 27:if(n.wrap){for(;A<32;){if(0===j)break e;j--,O|=I[k++]<<A,A+=8}if(S-=E,e.total_out+=S,n.total+=S,S&&(e.adler=n.check=n.flags?r(n.check,v,S,x-S):s(n.check,v,S,x-S)),S=E,(n.flags?O:_(O))!==n.check){e.msg="incorrect data check",n.mode=w;break}O=0,A=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;A<32;){if(0===j)break e;j--,O+=I[k++]<<A,A+=8}if(O!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=w;break}O=0,A=0}n.mode=29;case 29:P=u;break e;case w:P=p;break e;case 31:return b;default:return f}return e.next_out=x,e.avail_out=E,e.next_in=k,e.avail_in=j,n.hold=O,n.bits=A,(n.wsize||S!==e.avail_out&&n.mode<w&&(n.mode<27||t!==i))&&C(e,e.output,e.next_out,S-e.avail_out)?(n.mode=31,b):(V-=e.avail_in,S-=e.avail_out,e.total_in+=V,e.total_out+=S,n.total+=S,n.wrap&&S&&(e.adler=n.check=n.flags?r(n.check,v,S,e.next_out-S):s(n.check,v,S,e.next_out-S)),e.data_type=n.bits+(n.last?64:0)+(n.mode===y?128:0)+(20===n.mode||15===n.mode?256:0),(0===V&&0===S||t===i)&&P===d&&(P=g),P)},e.exports.inflateEnd=e=>{if(!e||!e.state)return f;let t=e.state;return t.window&&(t.window=null),e.state=null,d},e.exports.inflateGetHeader=(e,t)=>{if(!e||!e.state)return f;const n=e.state;return 0==(2&n.wrap)?f:(n.head=t,t.done=!1,d)},e.exports.inflateSetDictionary=(e,t)=>{const n=t.length;let r,o,a;return e&&e.state?(r=e.state,0!==r.wrap&&11!==r.mode?f:11===r.mode&&(o=1,o=s(o,t,n,0),o!==r.check)?p:(a=C(e,t,n,n),a?(r.mode=31,b):(r.havedict=1,d))):f},e.exports.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/pako/lib/zlib/inftrees.js":
/*!************************************************!*\
  !*** ./node_modules/pako/lib/zlib/inftrees.js ***!
  \************************************************/function(e){"use strict";const t=15,n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),r=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),o=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,a,i,l,c,d,u,h)=>{const f=h.bits;let p,b,g,m,y,w,_=0,I=0,v=0,k=0,x=0,j=0,E=0,O=0,A=0,R=0,C=null,V=0;const S=new Uint16Array(16),N=new Uint16Array(16);let T,U,L,B=null,z=0;for(_=0;_<=t;_++)S[_]=0;for(I=0;I<l;I++)S[a[i+I]]++;for(x=f,k=t;k>=1&&0===S[k];k--);if(x>k&&(x=k),0===k)return c[d++]=20971520,c[d++]=20971520,h.bits=1,0;for(v=1;v<k&&0===S[v];v++);for(x<v&&(x=v),O=1,_=1;_<=t;_++)if(O<<=1,O-=S[_],O<0)return-1;if(O>0&&(0===e||1!==k))return-1;for(N[1]=0,_=1;_<t;_++)N[_+1]=N[_]+S[_];for(I=0;I<l;I++)0!==a[i+I]&&(u[N[a[i+I]]++]=I);if(0===e?(C=B=u,w=19):1===e?(C=n,V-=257,B=s,z-=257,w=256):(C=r,B=o,w=-1),R=0,I=0,_=v,y=d,j=x,E=0,g=-1,A=1<<x,m=A-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){T=_-E,u[I]<w?(U=0,L=u[I]):u[I]>w?(U=B[z+u[I]],L=C[V+u[I]]):(U=96,L=0),p=1<<_-E,b=1<<j,v=b;do{b-=p,c[y+(R>>E)+b]=T<<24|U<<16|L|0}while(0!==b);for(p=1<<_-1;R&p;)p>>=1;if(0!==p?(R&=p-1,R+=p):R=0,I++,0==--S[_]){if(_===k)break;_=a[i+u[I]]}if(_>x&&(R&m)!==g){for(0===E&&(E=x),y+=v,j=_-E,O=1<<j;j+E<k&&(O-=S[j+E],!(O<=0));)j++,O<<=1;if(A+=1<<j,1===e&&A>852||2===e&&A>592)return 1;g=R&m,c[g]=x<<24|j<<16|y-d|0}}return 0!==R&&(c[y+R]=_-E<<24|64<<16|0),h.bits=x,0}},"./node_modules/pako/lib/zlib/messages.js":
/*!************************************************!*\
  !*** ./node_modules/pako/lib/zlib/messages.js ***!
  \************************************************/function(e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/pako/lib/zlib/trees.js":
/*!*********************************************!*\
  !*** ./node_modules/pako/lib/zlib/trees.js ***!
  \*********************************************/function(e){"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const n=256,s=286,r=30,o=15,a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),i=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576);t(d);const u=new Array(60);t(u);const h=new Array(512);t(h);const f=new Array(256);t(f);const p=new Array(29);t(p);const b=new Array(r);function g(e,t,n,s,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=s,this.max_length=r,this.has_stree=e&&e.length}let m,y,w;function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(b);const I=e=>e<256?h[e]:h[256+(e>>>7)],v=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},k=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,v(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},x=(e,t,n)=>{k(e,n[2*t],n[2*t+1])},j=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},E=(e,t,n)=>{const s=new Array(16);let r,a,i=0;for(r=1;r<=o;r++)s[r]=i=i+n[r-1]<<1;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=j(s[t]++,t))}},O=e=>{let t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<r;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},A=e=>{e.bi_valid>8?v(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},R=(e,t,n,s)=>{const r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&s[t]<=s[n]},C=(e,t,n)=>{const s=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&R(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!R(t,s,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=s},V=(e,t,s)=>{let r,o,l,c,d=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],o=e.pending_buf[e.l_buf+d],d++,0===r?x(e,o,t):(l=f[o],x(e,l+n+1,t),c=a[l],0!==c&&(o-=p[l],k(e,o,c)),r--,l=I(r),x(e,l,s),c=i[l],0!==c&&(r-=b[l],k(e,r,c)))}while(d<e.last_lit);x(e,256,t)},S=(e,t)=>{const n=t.dyn_tree,s=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems;let i,l,c,d=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<a;i++)0!==n[2*i]?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=d<2?++d:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=s[2*c+1]);for(t.max_code=d,i=e.heap_len>>1;i>=1;i--)C(e,n,i);c=a;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],C(e,n,1),l=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=l,n[2*c]=n[2*i]+n[2*l],e.depth[c]=(e.depth[i]>=e.depth[l]?e.depth[i]:e.depth[l])+1,n[2*i+1]=n[2*l+1]=c,e.heap[1]=c++,C(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,s=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,c=t.stat_desc.max_length;let d,u,h,f,p,b,g=0;for(f=0;f<=o;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)u=e.heap[d],f=n[2*n[2*u+1]+1]+1,f>c&&(f=c,g++),n[2*u+1]=f,u>s||(e.bl_count[f]++,p=0,u>=l&&(p=i[u-l]),b=n[2*u],e.opt_len+=b*(f+p),a&&(e.static_len+=b*(r[2*u+1]+p)));if(0!==g){do{for(f=c-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[c]--,g-=2}while(g>0);for(f=c;0!==f;f--)for(u=e.bl_count[f];0!==u;)h=e.heap[--d],h>s||(n[2*h+1]!==f&&(e.opt_len+=(f-n[2*h+1])*n[2*h],n[2*h+1]=f),u--)}})(e,t),E(n,d,e.bl_count)},N=(e,t,n)=>{let s,r,o=-1,a=t[1],i=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,s=0;s<=n;s++)r=a,a=t[2*(s+1)+1],++i<l&&r===a||(i<c?e.bl_tree[2*r]+=i:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):i<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))},T=(e,t,n)=>{let s,r,o=-1,a=t[1],i=0,l=7,c=4;for(0===a&&(l=138,c=3),s=0;s<=n;s++)if(r=a,a=t[2*(s+1)+1],!(++i<l&&r===a)){if(i<c)do{x(e,r,e.bl_tree)}while(0!=--i);else 0!==r?(r!==o&&(x(e,r,e.bl_tree),i--),x(e,16,e.bl_tree),k(e,i-3,2)):i<=10?(x(e,17,e.bl_tree),k(e,i-3,3)):(x(e,18,e.bl_tree),k(e,i-11,7));i=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}};let U=!1;const L=(e,t,n,s)=>{k(e,0+(s?1:0),3),((e,t,n,s)=>{A(e),s&&(v(e,n),v(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n,!0)};e.exports._tr_init=e=>{U||((()=>{let e,t,n,c,_;const I=new Array(16);for(n=0,c=0;c<28;c++)for(p[c]=n,e=0;e<1<<a[c];e++)f[n++]=c;for(f[n-1]=c,_=0,c=0;c<16;c++)for(b[c]=_,e=0;e<1<<i[c];e++)h[_++]=c;for(_>>=7;c<r;c++)for(b[c]=_<<7,e=0;e<1<<i[c]-7;e++)h[256+_++]=c;for(t=0;t<=o;t++)I[t]=0;for(e=0;e<=143;)d[2*e+1]=8,e++,I[8]++;for(;e<=255;)d[2*e+1]=9,e++,I[9]++;for(;e<=279;)d[2*e+1]=7,e++,I[7]++;for(;e<=287;)d[2*e+1]=8,e++,I[8]++;for(E(d,287,I),e=0;e<r;e++)u[2*e+1]=5,u[2*e]=j(e,5);m=new g(d,a,257,s,o),y=new g(u,i,0,r,o),w=new g(new Array(0),l,0,19,7)})(),U=!0),e.l_desc=new _(e.dyn_ltree,m),e.d_desc=new _(e.dyn_dtree,y),e.bl_desc=new _(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,O(e)},e.exports._tr_stored_block=L,e.exports._tr_flush_block=(e,t,s,r)=>{let o,a,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,s=4093624447;for(t=0;t<=31;t++,s>>>=1)if(1&s&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<n;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),S(e,e.l_desc),S(e,e.d_desc),i=(e=>{let t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=o&&(o=a)):o=a=s+5,s+4<=o&&-1!==t?L(e,t,s,r):4===e.strategy||a===o?(k(e,2+(r?1:0),3),V(e,d,u)):(k(e,4+(r?1:0),3),((e,t,n,s)=>{let r;for(k(e,t-257,5),k(e,n-1,5),k(e,s-4,4),r=0;r<s;r++)k(e,e.bl_tree[2*c[r]+1],3);T(e,e.dyn_ltree,t-1),T(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),V(e,e.dyn_ltree,e.dyn_dtree)),O(e),r&&A(e)},e.exports._tr_tally=(e,t,s)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&s,e.last_lit++,0===t?e.dyn_ltree[2*s]++:(e.matches++,t--,e.dyn_ltree[2*(f[s]+n+1)]++,e.dyn_dtree[2*I(t)]++),e.last_lit===e.lit_bufsize-1),e.exports._tr_align=e=>{k(e,2,3),x(e,256,d),(e=>{16===e.bi_valid?(v(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},"./node_modules/pako/lib/zlib/zstream.js":
/*!***********************************************!*\
  !*** ./node_modules/pako/lib/zlib/zstream.js ***!
  \***********************************************/function(e){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},"./node_modules/uuid/index.js":
/*!************************************!*\
  !*** ./node_modules/uuid/index.js ***!
  \************************************/function(e,t,n){var s=n(/*! ./v1 */"./node_modules/uuid/v1.js"),r=n(/*! ./v4 */"./node_modules/uuid/v4.js"),o=r;o.v1=s,o.v4=r,e.exports=o},"./node_modules/uuid/lib/bytesToUuid.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/bytesToUuid.js ***!
  \**********************************************/function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var s=n||0,r=t;return[r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],"-",r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]],r[e[s++]]].join("")}},"./node_modules/uuid/lib/rng-browser.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/rng-browser.js ***!
  \**********************************************/function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},"./node_modules/uuid/v1.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v1.js ***!
  \*********************************/function(e,t,n){var s,r,o=n(/*! ./lib/rng */"./node_modules/uuid/lib/rng-browser.js"),a=n(/*! ./lib/bytesToUuid */"./node_modules/uuid/lib/bytesToUuid.js"),i=0,l=0;e.exports=function(e,t,n){var c=t&&n||0,d=t||[],u=(e=e||{}).node||s,h=void 0!==e.clockseq?e.clockseq:r;if(null==u||null==h){var f=o();null==u&&(u=s=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=r=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),b=void 0!==e.nsecs?e.nsecs:l+1,g=p-i+(b-l)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||p>i)&&void 0===e.nsecs&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=p,l=b,r=h;var m=(1e4*(268435455&(p+=122192928e5))+b)%4294967296;d[c++]=m>>>24&255,d[c++]=m>>>16&255,d[c++]=m>>>8&255,d[c++]=255&m;var y=p/4294967296*1e4&268435455;d[c++]=y>>>8&255,d[c++]=255&y,d[c++]=y>>>24&15|16,d[c++]=y>>>16&255,d[c++]=h>>>8|128,d[c++]=255&h;for(var w=0;w<6;++w)d[c+w]=u[w];return t||a(d)}},"./node_modules/uuid/v4.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v4.js ***!
  \*********************************/function(e,t,n){var s=n(/*! ./lib/rng */"./node_modules/uuid/lib/rng-browser.js"),r=n(/*! ./lib/bytesToUuid */"./node_modules/uuid/lib/bytesToUuid.js");e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||s)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var i=0;i<16;++i)t[o+i]=a[i];return t||r(a)}},"./src/automerge.js":
/*!**************************!*\
  !*** ./src/automerge.js ***!
  \**************************/function(e,t,n){const s=n(/*! ./uuid */"./src/uuid.js"),r=n(/*! ../frontend */"./frontend/index.js"),{OPTIONS:o}=n(/*! ../frontend/constants */"./frontend/constants.js"),{encodeChange:a,decodeChange:i}=n(/*! ../backend/columnar */"./backend/columnar.js"),{isObject:l}=n(/*! ./common */"./src/common.js");let c=n(/*! ../backend */"./backend/index.js");function d(e){if("string"==typeof e)e={actorId:e};else if(void 0===e)e={};else if(!l(e))throw new TypeError(`Unsupported options for init(): ${e}`);return r.init(Object.assign({backend:c},e))}function u(e,t,n){const[s]=r.change(e,t,n);return s}function h(e){return c.getAllChanges(r.getBackendState(e,"getAllChanges"))}function f(e,t,n,s,a){const i=r.applyPatch(e,t,n),l=a.patchCallback||e[o].patchCallback;return l&&l(t,e,i,!1,s),i}function p(e,t,n={}){const s=r.getBackendState(e,"applyChanges"),[o,a]=c.applyChanges(s,t);return[f(e,a,o,t,n),a]}e.exports={init:d,from:function(e,t){return u(d(t),{message:"Initialization"},(t=>Object.assign(t,e)))},change:u,emptyChange:function(e,t){const[n]=r.emptyChange(e,t);return n},clone:function(e,t={}){const n=c.clone(r.getBackendState(e,"clone"));return f(d(t),c.getPatch(n),n,[],t)},free:function(e){c.free(r.getBackendState(e,"free"))},load:function(e,t={}){const n=c.load(e);return f(d(t),c.getPatch(n),n,[e],t)},save:function(e){return c.save(r.getBackendState(e,"save"))},merge:function(e,t){const n=r.getBackendState(e,"merge"),s=r.getBackendState(t,"merge","second"),o=c.getChangesAdded(n,s),[a]=p(e,o);return a},getChanges:function(e,t){const n=r.getBackendState(e,"getChanges"),s=r.getBackendState(t,"getChanges","second");return c.getChanges(s,c.getHeads(n))},getAllChanges:h,applyChanges:p,encodeChange:a,decodeChange:i,equals:function e(t,n){if(!l(t)||!l(n))return t===n;const s=Object.keys(t).sort(),r=Object.keys(n).sort();if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++){if(s[o]!==r[o])return!1;if(!e(t[s[o]],n[r[o]]))return!1}return!0},getHistory:function(e){const t=r.getActorId(e),n=h(e);return n.map(((e,s)=>({get change(){return i(e)},get snapshot(){const e=c.loadChanges(c.init(),n.slice(0,s+1));return r.applyPatch(d(t),c.getPatch(e),e)}})))},uuid:s,Frontend:r,setDefaultBackend:function(e){c=e},generateSyncMessage:function(e,t){const n=r.getBackendState(e,"generateSyncMessage");return c.generateSyncMessage(n,t)},receiveSyncMessage:function(e,t,n){const s=r.getBackendState(e,"receiveSyncMessage"),[a,i,l]=c.receiveSyncMessage(s,t,n);if(!l)return[e,i,l];let d=null;return e[o].patchCallback&&(d=c.decodeSyncMessage(n).changes),[f(e,l,a,d,{}),i,l]},initSyncState:function(){return c.initSyncState()},get Backend(){return c}};for(let t of["getObjectId","getObjectById","getActorId","setActorId","getConflicts","getLastLocalChange","Text","Table","Counter","Observable","Int","Uint","Float64"])e.exports[t]=r[t]},"./src/common.js":
/*!***********************!*\
  !*** ./src/common.js ***!
  \***********************/function(e){function t(e){return"object"==typeof e&&null!==e}e.exports={isObject:t,copyObject:function(e){if(!t(e))return{};let n={};for(let t of Object.keys(e))n[t]=e[t];return n},parseOpId:function(e){const t=/^(\d+)@(.*)$/.exec(e||"");if(!t)throw new RangeError(`Not a valid opId: ${e}`);return{counter:parseInt(t[1],10),actorId:t[2]}},equalBytes:function(e,t){if(!(e instanceof Uint8Array&&t instanceof Uint8Array))throw new TypeError("equalBytes can only compare Uint8Arrays");if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},createArrayOfNulls:function(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=null;return t}}},"./src/uuid.js":
/*!*********************!*\
  !*** ./src/uuid.js ***!
  \*********************/function(e,t,n){const{v4:s}=n(/*! uuid */"./node_modules/uuid/index.js");function r(){return s().replace(/-/g,"")}let o=r;function a(){return o()}a.setFactory=e=>{o=e},a.reset=()=>{o=r},e.exports=a}},t={},n=function n(s){if(t[s])return t[s].exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}("./src/automerge.js"),n;var e,t,n}));
//# sourceMappingURL=/sm/c7b5c2dbf758e2b6fe8ac4643ddd8af2a63d8dd5df94896f868abb55d70276f7.map